{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Paul2\\\\onedrive\\\\\\u684C\\u9762\\\\llm_dialougue_v4\\\\wingchat-app\\\\src\\\\components\\\\TrainingRoom\\\\MessageInput.js\",\n  _s = $RefreshSig$();\nimport React, { useRef } from 'react'; // *** 移除 useEffect ***\nimport { Form, Button, InputGroup, Spinner } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction MessageInput({\n  currentMessage,\n  onMessageChange,\n  onSendMessage,\n  onGetFeedback,\n  isLoading,\n  isGettingFeedback,\n  disabled\n}) {\n  _s();\n  const textareaRef = useRef(null); // Ref 仍然保留，但不用於高度調整\n\n  // *** 移除自動調整高度的 useEffect ***\n  /*\r\n  useEffect(() => {\r\n    if (textareaRef.current) {\r\n      textareaRef.current.style.height = 'auto'; // Reset height\r\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`; // Set to scroll height\r\n    }\r\n  }, [currentMessage]);\r\n  */\n\n  const handleKeyDown = e => {\n    if (e.key === 'Enter' && !e.shiftKey && !isLoading && !isGettingFeedback && !disabled && currentMessage.trim()) {\n      e.preventDefault();\n      onSendMessage();\n    }\n  };\n  const handleSendClick = () => {\n    if (!isLoading && !isGettingFeedback && !disabled && currentMessage.trim()) {\n      onSendMessage();\n    }\n  };\n  const handleFeedbackClick = () => {\n    if (!isLoading && !isGettingFeedback && !disabled) {\n      onGetFeedback();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(InputGroup, {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      variant: \"outline-info\",\n      onClick: handleFeedbackClick,\n      disabled: isLoading || isGettingFeedback || disabled,\n      title: \"\\u8B93 AI \\u91DD\\u5C0D\\u672C\\u6B21\\u5C0D\\u8A71\\u7D66\\u51FA\\u56DE\\u994B\",\n      children: isGettingFeedback ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Spinner, {\n          as: \"span\",\n          animation: \"border\",\n          size: \"sm\",\n          role: \"status\",\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"\\u8ACB\\u6C42\\u4E2D...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true) : \"🤔 我說得如何？\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n      ref: textareaRef // Ref 仍然可以保留給未來可能的其他用途\n      ,\n      as: \"textarea\",\n      rows: 2 // *** 設定固定的初始行數，例如 2 或 3 ***\n      ,\n      placeholder: disabled ? \"請先設定目標並選擇角色...\" : \"輸入訊息 (Shift+Enter 換行)...\",\n      value: currentMessage,\n      onChange: e => onMessageChange(e.target.value),\n      onKeyDown: handleKeyDown,\n      disabled: isLoading || isGettingFeedback || disabled\n      // *** 保持這些樣式，允許內部滾動 ***\n      ,\n      style: {\n        resize: 'none',\n        overflowY: 'auto',\n        maxHeight: '150px'\n      },\n      \"aria-label\": \"\\u8A0A\\u606F\\u8F38\\u5165\\u6846\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"primary\",\n      onClick: handleSendClick,\n      disabled: isLoading || isGettingFeedback || disabled || !currentMessage.trim(),\n      children: isLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Spinner, {\n          as: \"span\",\n          animation: \"border\",\n          size: \"sm\",\n          role: \"status\",\n          \"aria-hidden\": \"true\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"\\u50B3\\u9001\\u4E2D...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true) : /*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 14\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(MessageInput, \"gJtT2aPnbUb4WH8ANBrFCKASbhs=\");\n_c = MessageInput;\nexport default MessageInput;\nvar _c;\n$RefreshReg$(_c, \"MessageInput\");","map":{"version":3,"names":["React","useRef","Form","Button","InputGroup","Spinner","jsxDEV","_jsxDEV","Fragment","_Fragment","MessageInput","currentMessage","onMessageChange","onSendMessage","onGetFeedback","isLoading","isGettingFeedback","disabled","_s","textareaRef","handleKeyDown","e","key","shiftKey","trim","preventDefault","handleSendClick","handleFeedbackClick","children","variant","onClick","title","as","animation","size","role","fileName","_jsxFileName","lineNumber","columnNumber","className","Control","ref","rows","placeholder","value","onChange","target","onKeyDown","style","resize","overflowY","maxHeight","_c","$RefreshReg$"],"sources":["C:/Users/Paul2/onedrive/桌面/llm_dialougue_v4/wingchat-app/src/components/TrainingRoom/MessageInput.js"],"sourcesContent":["import React, { useRef } from 'react'; // *** 移除 useEffect ***\r\nimport { Form, Button, InputGroup, Spinner } from 'react-bootstrap';\r\n\r\nfunction MessageInput({\r\n    currentMessage,\r\n    onMessageChange,\r\n    onSendMessage,\r\n    onGetFeedback,\r\n    isLoading,\r\n    isGettingFeedback,\r\n    disabled\r\n}) {\r\n  const textareaRef = useRef(null); // Ref 仍然保留，但不用於高度調整\r\n\r\n  // *** 移除自動調整高度的 useEffect ***\r\n  /*\r\n  useEffect(() => {\r\n    if (textareaRef.current) {\r\n      textareaRef.current.style.height = 'auto'; // Reset height\r\n      textareaRef.current.style.height = `${textareaRef.current.scrollHeight}px`; // Set to scroll height\r\n    }\r\n  }, [currentMessage]);\r\n  */\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.key === 'Enter' && !e.shiftKey && !isLoading && !isGettingFeedback && !disabled && currentMessage.trim()) {\r\n      e.preventDefault();\r\n      onSendMessage();\r\n    }\r\n  };\r\n\r\n  const handleSendClick = () => {\r\n      if (!isLoading && !isGettingFeedback && !disabled && currentMessage.trim()) {\r\n          onSendMessage();\r\n      }\r\n  }\r\n\r\n  const handleFeedbackClick = () => {\r\n      if (!isLoading && !isGettingFeedback && !disabled) {\r\n          onGetFeedback();\r\n      }\r\n  }\r\n\r\n  return (\r\n    <InputGroup>\r\n      {/* 快速回饋按鈕 */}\r\n      <Button\r\n        variant=\"outline-info\"\r\n        onClick={handleFeedbackClick}\r\n        disabled={isLoading || isGettingFeedback || disabled}\r\n        title=\"讓 AI 針對本次對話給出回饋\"\r\n      >\r\n        {isGettingFeedback ? (\r\n            <>\r\n              <Spinner as=\"span\" animation=\"border\" size=\"sm\" role=\"status\" aria-hidden=\"true\" />\r\n              <span className=\"visually-hidden\">請求中...</span>\r\n            </>\r\n        ) : (\r\n            \"🤔 我說得如何？\"\r\n        )}\r\n      </Button>\r\n\r\n      <Form.Control\r\n        ref={textareaRef} // Ref 仍然可以保留給未來可能的其他用途\r\n        as=\"textarea\"\r\n        rows={2} // *** 設定固定的初始行數，例如 2 或 3 ***\r\n        placeholder={disabled ? \"請先設定目標並選擇角色...\" : \"輸入訊息 (Shift+Enter 換行)...\"}\r\n        value={currentMessage}\r\n        onChange={(e) => onMessageChange(e.target.value)}\r\n        onKeyDown={handleKeyDown}\r\n        disabled={isLoading || isGettingFeedback || disabled}\r\n        // *** 保持這些樣式，允許內部滾動 ***\r\n        style={{ resize: 'none', overflowY: 'auto', maxHeight: '150px' }}\r\n        aria-label=\"訊息輸入框\"\r\n      />\r\n\r\n      {/* 語音輸入預留圖示 (未來功能) */}\r\n      {/*\r\n      <Button variant=\"outline-secondary\" disabled={isLoading || isGettingFeedback || disabled} title=\"語音輸入 (尚未啟用)\">\r\n          <i className=\"bi bi-mic\"></i>\r\n      </Button>\r\n      */}\r\n\r\n      <Button\r\n        variant=\"primary\"\r\n        onClick={handleSendClick}\r\n        disabled={isLoading || isGettingFeedback || disabled || !currentMessage.trim()}\r\n      >\r\n        {isLoading ? (\r\n            <>\r\n                <Spinner as=\"span\" animation=\"border\" size=\"sm\" role=\"status\" aria-hidden=\"true\"/>\r\n                <span className=\"visually-hidden\">傳送中...</span>\r\n            </>\r\n        ) : (\r\n             <i className=\"bi bi-send\"></i>\r\n        )}\r\n      </Button>\r\n    </InputGroup>\r\n  );\r\n}\r\n\r\nexport default MessageInput;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}