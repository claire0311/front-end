{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Paul2\\\\Downloads\\\\front-end-main (5)\\\\front-end-main\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// src/App.js (完整版 - 包含傳遞 setActiveView)\n\nimport React, { useState, useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\nimport AppNavbar from './components/common/AppNavbar';\nimport TrainingRoom from './components/TrainingRoom/TrainingRoom';\nimport CharacterHall from './components/CharacterHall/CharacterHall';\nimport FeedbackWall from './components/FeedbackWall/FeedbackWall';\nimport './styles/App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CHARACTERS_STORAGE_KEY = 'wingchat_characters';\nconst FEEDBACK_STORAGE_KEY = 'wingchat_feedback';\nfunction App() {\n  _s();\n  const [activeView, setActiveView] = useState('training');\n  const [characters, setCharacters] = useState(() => {\n    const savedCharacters = localStorage.getItem(CHARACTERS_STORAGE_KEY);\n    if (savedCharacters) {\n      try {\n        const parsed = JSON.parse(savedCharacters);\n        if (Array.isArray(parsed) && parsed.length > 0) {\n          if (!parsed.find(c => c.id === 'default')) {\n            return [{\n              id: 'default',\n              name: '預設助手',\n              description: '...'\n            }, ...parsed];\n          }\n          return parsed;\n        }\n      } catch (e) {\n        console.error(\"Failed to parse characters\", e);\n      }\n    }\n    return [{\n      id: 'default',\n      name: '預設助手',\n      description: '我是 WingChat，一個友善且樂於助人的 AI 社交教練。'\n    }];\n  });\n  const [selectedCharacter, setSelectedCharacter] = useState(characters[0]);\n  useEffect(() => {\n    localStorage.setItem(CHARACTERS_STORAGE_KEY, JSON.stringify(characters));\n  }, [characters]);\n  const handleUpdateCharacters = newCharacters => {\n    setCharacters(newCharacters);\n    if (selectedCharacter && !newCharacters.find(c => c.id === selectedCharacter.id)) {\n      setSelectedCharacter(newCharacters.length > 0 ? newCharacters[0] : null);\n    } else if (!selectedCharacter && newCharacters.length > 0) {\n      setSelectedCharacter(newCharacters[0]);\n    }\n    if (newCharacters.length === 0) {\n      const defaultChar = {\n        id: 'default',\n        name: '預設助手',\n        description: '我是 WingChat...'\n      };\n      setCharacters([defaultChar]);\n      setSelectedCharacter(defaultChar);\n    }\n  };\n  const handleSelectCharacter = character => {\n    if (character) {\n      setSelectedCharacter(character);\n      if (activeView !== 'training') {\n        setActiveView('training');\n      }\n    } else {\n      console.warn(\"Attempted to select a null character.\");\n      setSelectedCharacter(characters.find(c => c.id === 'default') || (characters.length > 0 ? characters[0] : null)); // 回退到預設或第一個\n    }\n  };\n  const renderView = () => {\n    switch (activeView) {\n      case 'characters':\n        return /*#__PURE__*/_jsxDEV(CharacterHall, {\n          characters: characters,\n          onUpdateCharacters: handleUpdateCharacters,\n          onSelectCharacter: handleSelectCharacter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 16\n        }, this);\n      case 'feedback':\n        return /*#__PURE__*/_jsxDEV(FeedbackWall, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 16\n        }, this);\n      case 'training':\n      default:\n        return /*#__PURE__*/_jsxDEV(TrainingRoom, {\n          characters: characters,\n          selectedCharacter: selectedCharacter,\n          onSelectCharacter: handleSelectCharacter\n          // --- 添加 setActiveView prop ---\n          ,\n          setActiveView: setActiveView // <<<--- 傳遞切換視圖函數\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(AppNavbar, {\n      onSelectView: setActiveView,\n      currentView: activeView\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      className: `main-content ${activeView === 'training' ? 'no-scroll p-0' : 'p-3'} d-flex flex-column`,\n      children: renderView()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"CvpxPFg4rJeQXadx5FWNxNf/gps=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Container","AppNavbar","TrainingRoom","CharacterHall","FeedbackWall","jsxDEV","_jsxDEV","CHARACTERS_STORAGE_KEY","FEEDBACK_STORAGE_KEY","App","_s","activeView","setActiveView","characters","setCharacters","savedCharacters","localStorage","getItem","parsed","JSON","parse","Array","isArray","length","find","c","id","name","description","e","console","error","selectedCharacter","setSelectedCharacter","setItem","stringify","handleUpdateCharacters","newCharacters","defaultChar","handleSelectCharacter","character","warn","renderView","onUpdateCharacters","onSelectCharacter","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onSelectView","currentView","fluid","_c","$RefreshReg$"],"sources":["C:/Users/Paul2/Downloads/front-end-main (5)/front-end-main/src/App.js"],"sourcesContent":["// src/App.js (完整版 - 包含傳遞 setActiveView)\n\nimport React, { useState, useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\nimport AppNavbar from './components/common/AppNavbar';\nimport TrainingRoom from './components/TrainingRoom/TrainingRoom';\nimport CharacterHall from './components/CharacterHall/CharacterHall';\nimport FeedbackWall from './components/FeedbackWall/FeedbackWall';\nimport './styles/App.css';\n\nconst CHARACTERS_STORAGE_KEY = 'wingchat_characters';\nconst FEEDBACK_STORAGE_KEY = 'wingchat_feedback';\n\nfunction App() {\n  const [activeView, setActiveView] = useState('training');\n  const [characters, setCharacters] = useState(() => {\n    const savedCharacters = localStorage.getItem(CHARACTERS_STORAGE_KEY);\n    if (savedCharacters) {\n      try {\n        const parsed = JSON.parse(savedCharacters);\n        if (Array.isArray(parsed) && parsed.length > 0) {\n            if (!parsed.find(c => c.id === 'default')) {\n                 return [{ id: 'default', name: '預設助手', description: '...' }, ...parsed];\n            }\n            return parsed;\n        }\n      } catch (e) { console.error(\"Failed to parse characters\", e); }\n    }\n    return [{ id: 'default', name: '預設助手', description: '我是 WingChat，一個友善且樂於助人的 AI 社交教練。' }];\n  });\n  const [selectedCharacter, setSelectedCharacter] = useState(characters[0]);\n\n  useEffect(() => {\n    localStorage.setItem(CHARACTERS_STORAGE_KEY, JSON.stringify(characters));\n  }, [characters]);\n\n  const handleUpdateCharacters = (newCharacters) => {\n    setCharacters(newCharacters);\n    if (selectedCharacter && !newCharacters.find(c => c.id === selectedCharacter.id)) {\n      setSelectedCharacter(newCharacters.length > 0 ? newCharacters[0] : null);\n    } else if (!selectedCharacter && newCharacters.length > 0) {\n        setSelectedCharacter(newCharacters[0]);\n    }\n    if (newCharacters.length === 0) {\n        const defaultChar = { id: 'default', name: '預設助手', description: '我是 WingChat...' };\n        setCharacters([defaultChar]);\n        setSelectedCharacter(defaultChar);\n    }\n  };\n\n  const handleSelectCharacter = (character) => {\n    if (character) {\n        setSelectedCharacter(character);\n        if (activeView !== 'training') {\n          setActiveView('training');\n        }\n    } else {\n        console.warn(\"Attempted to select a null character.\");\n        setSelectedCharacter(characters.find(c => c.id === 'default') || (characters.length > 0 ? characters[0] : null)); // 回退到預設或第一個\n    }\n  };\n\n  const renderView = () => {\n    switch (activeView) {\n      case 'characters':\n        return <CharacterHall\n                  characters={characters}\n                  onUpdateCharacters={handleUpdateCharacters}\n                  onSelectCharacter={handleSelectCharacter}\n                />;\n      case 'feedback':\n        return <FeedbackWall />;\n      case 'training':\n      default:\n        return <TrainingRoom\n                  characters={characters}\n                  selectedCharacter={selectedCharacter}\n                  onSelectCharacter={handleSelectCharacter}\n                  // --- 添加 setActiveView prop ---\n                  setActiveView={setActiveView} // <<<--- 傳遞切換視圖函數\n               />;\n    }\n  };\n\n  return (\n    <div className=\"app-container\">\n      <AppNavbar onSelectView={setActiveView} currentView={activeView} />\n      <Container fluid className={`main-content ${activeView === 'training' ? 'no-scroll p-0' : 'p-3'} d-flex flex-column`}>\n        {renderView()}\n      </Container>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":";;AAAA;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,OAAOC,SAAS,MAAM,+BAA+B;AACrD,OAAOC,YAAY,MAAM,wCAAwC;AACjE,OAAOC,aAAa,MAAM,0CAA0C;AACpE,OAAOC,YAAY,MAAM,wCAAwC;AACjE,OAAO,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,sBAAsB,GAAG,qBAAqB;AACpD,MAAMC,oBAAoB,GAAG,mBAAmB;AAEhD,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EACb,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGd,QAAQ,CAAC,UAAU,CAAC;EACxD,MAAM,CAACe,UAAU,EAAEC,aAAa,CAAC,GAAGhB,QAAQ,CAAC,MAAM;IACjD,MAAMiB,eAAe,GAAGC,YAAY,CAACC,OAAO,CAACV,sBAAsB,CAAC;IACpE,IAAIQ,eAAe,EAAE;MACnB,IAAI;QACF,MAAMG,MAAM,GAAGC,IAAI,CAACC,KAAK,CAACL,eAAe,CAAC;QAC1C,IAAIM,KAAK,CAACC,OAAO,CAACJ,MAAM,CAAC,IAAIA,MAAM,CAACK,MAAM,GAAG,CAAC,EAAE;UAC5C,IAAI,CAACL,MAAM,CAACM,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAK,SAAS,CAAC,EAAE;YACtC,OAAO,CAAC;cAAEA,EAAE,EAAE,SAAS;cAAEC,IAAI,EAAE,MAAM;cAAEC,WAAW,EAAE;YAAM,CAAC,EAAE,GAAGV,MAAM,CAAC;UAC5E;UACA,OAAOA,MAAM;QACjB;MACF,CAAC,CAAC,OAAOW,CAAC,EAAE;QAAEC,OAAO,CAACC,KAAK,CAAC,4BAA4B,EAAEF,CAAC,CAAC;MAAE;IAChE;IACA,OAAO,CAAC;MAAEH,EAAE,EAAE,SAAS;MAAEC,IAAI,EAAE,MAAM;MAAEC,WAAW,EAAE;IAAkC,CAAC,CAAC;EAC1F,CAAC,CAAC;EACF,MAAM,CAACI,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGnC,QAAQ,CAACe,UAAU,CAAC,CAAC,CAAC,CAAC;EAEzEd,SAAS,CAAC,MAAM;IACdiB,YAAY,CAACkB,OAAO,CAAC3B,sBAAsB,EAAEY,IAAI,CAACgB,SAAS,CAACtB,UAAU,CAAC,CAAC;EAC1E,CAAC,EAAE,CAACA,UAAU,CAAC,CAAC;EAEhB,MAAMuB,sBAAsB,GAAIC,aAAa,IAAK;IAChDvB,aAAa,CAACuB,aAAa,CAAC;IAC5B,IAAIL,iBAAiB,IAAI,CAACK,aAAa,CAACb,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAKM,iBAAiB,CAACN,EAAE,CAAC,EAAE;MAChFO,oBAAoB,CAACI,aAAa,CAACd,MAAM,GAAG,CAAC,GAAGc,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;IAC1E,CAAC,MAAM,IAAI,CAACL,iBAAiB,IAAIK,aAAa,CAACd,MAAM,GAAG,CAAC,EAAE;MACvDU,oBAAoB,CAACI,aAAa,CAAC,CAAC,CAAC,CAAC;IAC1C;IACA,IAAIA,aAAa,CAACd,MAAM,KAAK,CAAC,EAAE;MAC5B,MAAMe,WAAW,GAAG;QAAEZ,EAAE,EAAE,SAAS;QAAEC,IAAI,EAAE,MAAM;QAAEC,WAAW,EAAE;MAAiB,CAAC;MAClFd,aAAa,CAAC,CAACwB,WAAW,CAAC,CAAC;MAC5BL,oBAAoB,CAACK,WAAW,CAAC;IACrC;EACF,CAAC;EAED,MAAMC,qBAAqB,GAAIC,SAAS,IAAK;IAC3C,IAAIA,SAAS,EAAE;MACXP,oBAAoB,CAACO,SAAS,CAAC;MAC/B,IAAI7B,UAAU,KAAK,UAAU,EAAE;QAC7BC,aAAa,CAAC,UAAU,CAAC;MAC3B;IACJ,CAAC,MAAM;MACHkB,OAAO,CAACW,IAAI,CAAC,uCAAuC,CAAC;MACrDR,oBAAoB,CAACpB,UAAU,CAACW,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,EAAE,KAAK,SAAS,CAAC,KAAKb,UAAU,CAACU,MAAM,GAAG,CAAC,GAAGV,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC;IACtH;EACF,CAAC;EAED,MAAM6B,UAAU,GAAGA,CAAA,KAAM;IACvB,QAAQ/B,UAAU;MAChB,KAAK,YAAY;QACf,oBAAOL,OAAA,CAACH,aAAa;UACXU,UAAU,EAAEA,UAAW;UACvB8B,kBAAkB,EAAEP,sBAAuB;UAC3CQ,iBAAiB,EAAEL;QAAsB;UAAAM,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1C,CAAC;MACZ,KAAK,UAAU;QACb,oBAAO1C,OAAA,CAACF,YAAY;UAAAyC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MACzB,KAAK,UAAU;MACf;QACE,oBAAO1C,OAAA,CAACJ,YAAY;UACVW,UAAU,EAAEA,UAAW;UACvBmB,iBAAiB,EAAEA,iBAAkB;UACrCY,iBAAiB,EAAEL;UACnB;UAAA;UACA3B,aAAa,EAAEA,aAAc,CAAC;QAAA;UAAAiC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC,CAAC;IACb;EACF,CAAC;EAED,oBACE1C,OAAA;IAAK2C,SAAS,EAAC,eAAe;IAAAC,QAAA,gBAC5B5C,OAAA,CAACL,SAAS;MAACkD,YAAY,EAAEvC,aAAc;MAACwC,WAAW,EAAEzC;IAAW;MAAAkC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACnE1C,OAAA,CAACN,SAAS;MAACqD,KAAK;MAACJ,SAAS,EAAE,gBAAgBtC,UAAU,KAAK,UAAU,GAAG,eAAe,GAAG,KAAK,qBAAsB;MAAAuC,QAAA,EAClHR,UAAU,CAAC;IAAC;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACT,CAAC;AAEV;AAACtC,EAAA,CA/EQD,GAAG;AAAA6C,EAAA,GAAH7C,GAAG;AAiFZ,eAAeA,GAAG;AAAC,IAAA6C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}