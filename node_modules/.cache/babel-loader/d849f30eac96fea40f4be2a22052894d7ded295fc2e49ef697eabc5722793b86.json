{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Paul2\\\\onedrive\\\\\\u684C\\u9762\\\\llm_dialougue_v4\\\\wingchat-app\\\\src\\\\components\\\\TrainingRoom\\\\ChatDisplay.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from 'react';\nimport { Spinner, Alert } from 'react-bootstrap';\nimport ChatMessage from './ChatMessage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChatDisplay({\n  messages,\n  isLoading\n}) {\n  _s();\n  const chatEndRef = useRef(null);\n\n  // 自動滾動到底部\n  useEffect(() => {\n    // 使用 setTimeout 確保在 DOM 更新後再滾動，尤其是在有圖片或複雜內容時\n    const timer = setTimeout(() => {\n      var _chatEndRef$current;\n      (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n        behavior: \"smooth\"\n      });\n    }, 100); // 短暫延遲\n    return () => clearTimeout(timer); // 清除計時器\n  }, [messages, isLoading]); // 當訊息更新或載入狀態改變時滾動\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-display-area mb-3\",\n    children: [messages.length === 0 && !isLoading && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"info\",\n      className: \"text-center small p-2\",\n      children: \"\\u8A2D\\u5B9A\\u597D\\u76EE\\u6A19\\u5F8C\\uFF0C\\u5C31\\u53EF\\u4EE5\\u958B\\u59CB\\u548C AI \\u5C0D\\u8A71\\u7DF4\\u7FD2\\u56C9\\uFF01\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 20,\n      columnNumber: 9\n    }, this), messages.map(msg => /*#__PURE__*/_jsxDEV(ChatMessage, {\n      sender: msg.sender,\n      text: msg.text\n    }, msg.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 9\n    }, this)), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-flex justify-content-center align-items-center my-2 p-2 text-muted\",\n      children: [/*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        size: \"sm\",\n        className: \"me-2\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"Loading...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 11\n      }, this), \"AI \\u6B63\\u5728\\u601D\\u8003...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: chatEndRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 18,\n    columnNumber: 5\n  }, this);\n}\n_s(ChatDisplay, \"BSXkY06UzTG8qL2envbQpCncJSI=\");\n_c = ChatDisplay;\nexport default ChatDisplay;\nvar _c;\n$RefreshReg$(_c, \"ChatDisplay\");","map":{"version":3,"names":["React","useRef","useEffect","Spinner","Alert","ChatMessage","jsxDEV","_jsxDEV","ChatDisplay","messages","isLoading","_s","chatEndRef","timer","setTimeout","_chatEndRef$current","current","scrollIntoView","behavior","clearTimeout","className","children","length","variant","fileName","_jsxFileName","lineNumber","columnNumber","map","msg","sender","text","id","animation","role","size","ref","_c","$RefreshReg$"],"sources":["C:/Users/Paul2/onedrive/桌面/llm_dialougue_v4/wingchat-app/src/components/TrainingRoom/ChatDisplay.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\r\nimport { Spinner, Alert } from 'react-bootstrap';\r\nimport ChatMessage from './ChatMessage';\r\n\r\nfunction ChatDisplay({ messages, isLoading }) {\r\n  const chatEndRef = useRef(null);\r\n\r\n  // 自動滾動到底部\r\n  useEffect(() => {\r\n    // 使用 setTimeout 確保在 DOM 更新後再滾動，尤其是在有圖片或複雜內容時\r\n    const timer = setTimeout(() => {\r\n        chatEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n    }, 100); // 短暫延遲\r\n    return () => clearTimeout(timer); // 清除計時器\r\n  }, [messages, isLoading]); // 當訊息更新或載入狀態改變時滾動\r\n\r\n  return (\r\n    <div className=\"chat-display-area mb-3\">\r\n      {messages.length === 0 && !isLoading && (\r\n        <Alert variant=\"info\" className=\"text-center small p-2\">\r\n          設定好目標後，就可以開始和 AI 對話練習囉！\r\n        </Alert>\r\n      )}\r\n      {messages.map((msg) => (\r\n        <ChatMessage key={msg.id} sender={msg.sender} text={msg.text} />\r\n      ))}\r\n      {isLoading && (\r\n        <div className=\"d-flex justify-content-center align-items-center my-2 p-2 text-muted\">\r\n          <Spinner animation=\"border\" role=\"status\" size=\"sm\" className=\"me-2\">\r\n            <span className=\"visually-hidden\">Loading...</span>\r\n          </Spinner>\r\n          AI 正在思考...\r\n        </div>\r\n      )}\r\n      {/* 這個 div 用於自動滾動 */}\r\n      <div ref={chatEndRef} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChatDisplay;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAChD,SAASC,OAAO,EAAEC,KAAK,QAAQ,iBAAiB;AAChD,OAAOC,WAAW,MAAM,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAExC,SAASC,WAAWA,CAAC;EAAEC,QAAQ;EAAEC;AAAU,CAAC,EAAE;EAAAC,EAAA;EAC5C,MAAMC,UAAU,GAAGX,MAAM,CAAC,IAAI,CAAC;;EAE/B;EACAC,SAAS,CAAC,MAAM;IACd;IACA,MAAMW,KAAK,GAAGC,UAAU,CAAC,MAAM;MAAA,IAAAC,mBAAA;MAC3B,CAAAA,mBAAA,GAAAH,UAAU,CAACI,OAAO,cAAAD,mBAAA,uBAAlBA,mBAAA,CAAoBE,cAAc,CAAC;QAAEC,QAAQ,EAAE;MAAS,CAAC,CAAC;IAC9D,CAAC,EAAE,GAAG,CAAC,CAAC,CAAC;IACT,OAAO,MAAMC,YAAY,CAACN,KAAK,CAAC,CAAC,CAAC;EACpC,CAAC,EAAE,CAACJ,QAAQ,EAAEC,SAAS,CAAC,CAAC,CAAC,CAAC;;EAE3B,oBACEH,OAAA;IAAKa,SAAS,EAAC,wBAAwB;IAAAC,QAAA,GACpCZ,QAAQ,CAACa,MAAM,KAAK,CAAC,IAAI,CAACZ,SAAS,iBAClCH,OAAA,CAACH,KAAK;MAACmB,OAAO,EAAC,MAAM;MAACH,SAAS,EAAC,uBAAuB;MAAAC,QAAA,EAAC;IAExD;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAO,CACR,EACAlB,QAAQ,CAACmB,GAAG,CAAEC,GAAG,iBAChBtB,OAAA,CAACF,WAAW;MAAcyB,MAAM,EAAED,GAAG,CAACC,MAAO;MAACC,IAAI,EAAEF,GAAG,CAACE;IAAK,GAA3CF,GAAG,CAACG,EAAE;MAAAR,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAuC,CAChE,CAAC,EACDjB,SAAS,iBACRH,OAAA;MAAKa,SAAS,EAAC,sEAAsE;MAAAC,QAAA,gBACnFd,OAAA,CAACJ,OAAO;QAAC8B,SAAS,EAAC,QAAQ;QAACC,IAAI,EAAC,QAAQ;QAACC,IAAI,EAAC,IAAI;QAACf,SAAS,EAAC,MAAM;QAAAC,QAAA,eAClEd,OAAA;UAAMa,SAAS,EAAC,iBAAiB;UAAAC,QAAA,EAAC;QAAU;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC5C,CAAC,kCAEZ;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAK,CACN,eAEDpB,OAAA;MAAK6B,GAAG,EAAExB;IAAW;MAAAY,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACrB,CAAC;AAEV;AAAChB,EAAA,CAlCQH,WAAW;AAAA6B,EAAA,GAAX7B,WAAW;AAoCpB,eAAeA,WAAW;AAAC,IAAA6B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}