{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Paul2\\\\Downloads\\\\front-end-main (5)\\\\front-end-main\\\\src\\\\components\\\\FeedbackWall\\\\FeedbackWall.js\",\n  _s = $RefreshSig$();\n// src/components/FeedbackWall/FeedbackWall.js (將角色搜尋移入 Collapse)\n\nimport React, { useState, useEffect, useMemo } from 'react';\n// 導入需要的元件，包括 Collapse, InputGroup, Form\nimport { Container, Row, Col, Card, Alert, Badge, InputGroup, Form, Button, Collapse } from 'react-bootstrap';\nimport FeedbackChart from './FeedbackChart';\n// 假設 CSS 在同名文件或 App.css 中\nimport './FeedbackWall.css'; // 或者根據你的結構調整路徑\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FEEDBACK_STORAGE_KEY = 'wingchat_feedback';\nfunction FeedbackWall() {\n  _s();\n  const [originalFeedbackHistory, setOriginalFeedbackHistory] = useState([]);\n  const [filteredFeedbackHistory, setFilteredFeedbackHistory] = useState([]);\n  const [characterSearch, setCharacterSearch] = useState('');\n  const [goalSearch, setGoalSearch] = useState('');\n  const [showFilters, setShowFilters] = useState(true); // 篩選區域默認展開\n\n  // 加載原始數據\n  useEffect(() => {\n    const savedFeedback = localStorage.getItem(FEEDBACK_STORAGE_KEY);\n    let parsedFeedback = [];\n    if (savedFeedback) {\n      try {\n        parsedFeedback = JSON.parse(savedFeedback);\n        if (!Array.isArray(parsedFeedback)) parsedFeedback = [];\n        parsedFeedback = parsedFeedback.filter(fb => typeof fb.timestamp === 'number').sort((a, b) => b.timestamp - a.timestamp);\n      } catch (e) {\n        console.error(\"Failed to parse feedback history\", e);\n      }\n    }\n    setOriginalFeedbackHistory(parsedFeedback);\n    setFilteredFeedbackHistory(parsedFeedback); // 初始顯示所有數據\n  }, []); // 僅在組件加載時運行一次\n\n  // 執行篩選邏輯\n  useEffect(() => {\n    let result = [...originalFeedbackHistory];\n\n    // 按角色名稱篩選\n    if (characterSearch.trim()) {\n      const lowerCaseSearch = characterSearch.trim().toLowerCase();\n      result = result.filter(fb => {\n        var _fb$characterName;\n        return (_fb$characterName = fb.characterName) === null || _fb$characterName === void 0 ? void 0 : _fb$characterName.toLowerCase().includes(lowerCaseSearch);\n      });\n    }\n\n    // 按對話目標關鍵字篩選\n    if (goalSearch.trim()) {\n      const lowerCaseGoal = goalSearch.trim().toLowerCase();\n      result = result.filter(fb => {\n        var _fb$goal;\n        return (_fb$goal = fb.goal) === null || _fb$goal === void 0 ? void 0 : _fb$goal.toLowerCase().includes(lowerCaseGoal);\n      });\n    }\n\n    // TODO: 在此添加分數範圍篩選邏輯\n\n    setFilteredFeedbackHistory(result);\n  }, [originalFeedbackHistory, characterSearch, goalSearch]);\n\n  // 清除所有篩選條件\n  const clearFilters = () => {\n    setCharacterSearch('');\n    setGoalSearch('');\n    // 如果有分數篩選，也要在這裡清除\n  };\n\n  // --- 準備圖表數據 (使用篩選後的數據) ---\n  const recentFilteredFeedback = filteredFeedbackHistory.slice(0, 5).reverse();\n  const chartLabels = recentFilteredFeedback.map((fb, index, arr) => {\n    const date = new Date(fb.timestamp);\n    const dateString = date.toLocaleDateString('zh-TW', {\n      month: 'numeric',\n      day: 'numeric'\n    });\n    const timeString = date.toLocaleTimeString('zh-TW', {\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false\n    });\n    const prevDateString = index > 0 ? new Date(arr[index - 1].timestamp).toLocaleDateString('zh-TW', {\n      month: 'numeric',\n      day: 'numeric'\n    }) : null;\n    return dateString === prevDateString ? `${dateString} ${timeString}` : dateString;\n  });\n  const getScore = score => score === null || score === undefined ? 0 : score;\n  const chartDataSets = [{\n    label: '清晰度',\n    data: recentFilteredFeedback.map(fb => {\n      var _fb$scores;\n      return getScore((_fb$scores = fb.scores) === null || _fb$scores === void 0 ? void 0 : _fb$scores.clarity);\n    }),\n    backgroundColor: 'rgba(54, 162, 235, 0.6)',\n    borderColor: 'rgba(54, 162, 235, 1)',\n    borderWidth: 1\n  }, {\n    label: '同理心',\n    data: recentFilteredFeedback.map(fb => {\n      var _fb$scores2;\n      return getScore((_fb$scores2 = fb.scores) === null || _fb$scores2 === void 0 ? void 0 : _fb$scores2.empathy);\n    }),\n    backgroundColor: 'rgba(255, 206, 86, 0.6)',\n    borderColor: 'rgba(255, 206, 86, 1)',\n    borderWidth: 1\n  }, {\n    label: '自信',\n    data: recentFilteredFeedback.map(fb => {\n      var _fb$scores3;\n      return getScore((_fb$scores3 = fb.scores) === null || _fb$scores3 === void 0 ? void 0 : _fb$scores3.confidence);\n    }),\n    backgroundColor: 'rgba(75, 192, 192, 0.6)',\n    borderColor: 'rgba(75, 192, 192, 1)',\n    borderWidth: 1\n  }, {\n    label: '適當性',\n    data: recentFilteredFeedback.map(fb => {\n      var _fb$scores4;\n      return getScore((_fb$scores4 = fb.scores) === null || _fb$scores4 === void 0 ? void 0 : _fb$scores4.appropriateness);\n    }),\n    backgroundColor: 'rgba(153, 102, 255, 0.6)',\n    borderColor: 'rgba(153, 102, 255, 1)',\n    borderWidth: 1\n  }, {\n    label: '目標達成',\n    data: recentFilteredFeedback.map(fb => {\n      var _fb$scores5;\n      return getScore((_fb$scores5 = fb.scores) === null || _fb$scores5 === void 0 ? void 0 : _fb$scores5.goalAchievement);\n    }),\n    backgroundColor: 'rgba(255, 99, 132, 0.6)',\n    borderColor: 'rgba(255, 99, 132, 1)',\n    borderWidth: 1\n  }];\n  return (\n    /*#__PURE__*/\n    // 使用 Container 和 CSS class 進行佈局\n    _jsxDEV(Container, {\n      fluid: true,\n      className: \"feedback-wall-container p-0 d-flex flex-column\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feedback-wall-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"mb-2\",\n          children: \"\\u56DE\\u994B\\u7246\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-muted mb-0\",\n          children: \"\\u9019\\u88E1\\u5F59\\u7E3D\\u4E86\\u4F60\\u6BCF\\u6B21\\u8ACB\\u6C42 AI \\u56DE\\u994B\\u7684\\u7D50\\u679C\\uFF0C\\u89C0\\u5BDF\\u4F60\\u7684\\u9032\\u6B65\\u8DA8\\u52E2\\u5427\\uFF01\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feedback-filters-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex justify-content-between align-items-center mb-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"mb-0 text-muted small\",\n            children: \"\\u641C\\u5C0B\\u8207\\u7BE9\\u9078\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            variant: \"link\",\n            size: \"sm\",\n            onClick: () => setShowFilters(!showFilters),\n            \"aria-controls\": \"collapse-feedback-filters\",\n            \"aria-expanded\": showFilters,\n            className: \"p-0 text-secondary\",\n            children: [showFilters ? '收起' : '展開', \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n              className: `bi bi-chevron-${showFilters ? 'up' : 'down'}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 41\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n          in: showFilters,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"collapse-feedback-filters\",\n            children: [/*#__PURE__*/_jsxDEV(Row, {\n              className: \"g-2 mb-2\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(Col, {\n                md: 6,\n                children: /*#__PURE__*/_jsxDEV(InputGroup, {\n                  size: \"sm\",\n                  children: [/*#__PURE__*/_jsxDEV(InputGroup.Text, {\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"bi bi-person\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 106,\n                      columnNumber: 36\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 106,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"\\u641C\\u5C0B\\u89D2\\u8272\\u540D\\u7A31...\",\n                    value: characterSearch,\n                    onChange: e => setCharacterSearch(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 105,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(Col, {\n                md: 6,\n                children: /*#__PURE__*/_jsxDEV(InputGroup, {\n                  size: \"sm\",\n                  children: [/*#__PURE__*/_jsxDEV(InputGroup.Text, {\n                    children: /*#__PURE__*/_jsxDEV(\"i\", {\n                      className: \"bi bi-chat-dots\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 36\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 117,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                    type: \"text\",\n                    placeholder: \"\\u641C\\u5C0B\\u5C0D\\u8A71\\u76EE\\u6A19\\u95DC\\u9375\\u5B57...\",\n                    value: goalSearch,\n                    onChange: e => setGoalSearch(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 13\n            }, this), (characterSearch || goalSearch) && /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline-secondary\",\n              size: \"sm\",\n              onClick: clearFilters,\n              className: \"w-100\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-x-lg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 132,\n                columnNumber: 18\n              }, this), \" \\u6E05\\u9664\\u6240\\u6709\\u7BE9\\u9078\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"feedback-wall-body\",\n        children: [/*#__PURE__*/_jsxDEV(Card, {\n          className: \"mb-4 shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            children: [\"\\u6700\\u8FD1 \", recentFilteredFeedback.length, \" \\u6B21\\u7B26\\u5408\\u7BE9\\u9078\\u7684\\u7DF4\\u7FD2\\u8868\\u73FE\\u8DA8\\u52E2\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: filteredFeedbackHistory.length > 0 ? recentFilteredFeedback.length > 0 ? /*#__PURE__*/_jsxDEV(FeedbackChart, {\n              labels: chartLabels,\n              datasets: chartDataSets\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 18\n            }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n              variant: \"light\",\n              className: \"text-center\",\n              children: \"\\u6C92\\u6709\\u6700\\u8FD1\\u7684\\u56DE\\u994B\\u6578\\u64DA\\u53EF\\u4F9B\\u7E6A\\u88FD\\u8DA8\\u52E2\\u5716\\u3002\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 150,\n              columnNumber: 21\n            }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n              variant: \"light\",\n              className: \"text-center\",\n              children: characterSearch || goalSearch ? '找不到符合篩選條件的回饋記錄。' : '還沒有任何回饋記錄。'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"h5 mb-3\",\n          children: [\"\\u8A73\\u7D30\\u56DE\\u994B\\u8A18\\u9304 (\", filteredFeedbackHistory.length, \" \\u7B46)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 9\n        }, this), filteredFeedbackHistory.length > 0 ? filteredFeedbackHistory.map(fb => /*#__PURE__*/_jsxDEV(Card, {\n          className: \"shadow-sm\",\n          children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n            className: \"d-flex justify-content-between align-items-center small text-muted flex-wrap\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: new Date(fb.timestamp).toLocaleString('zh-TW', {\n                dateStyle: 'short',\n                timeStyle: 'short'\n              })\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-1 mt-md-0\",\n              children: [/*#__PURE__*/_jsxDEV(Badge, {\n                bg: \"secondary\",\n                className: \"me-2\",\n                children: [\"\\u89D2\\u8272: \", fb.characterName || '未知']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Badge, {\n                bg: \"info\",\n                text: \"dark\",\n                children: [\"\\u76EE\\u6A19: \", fb.goal || '未知']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n            children: [/*#__PURE__*/_jsxDEV(Card.Subtitle, {\n              className: \"mb-2 text-muted\",\n              children: \"AI \\u7E3D\\u7D50:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                whiteSpace: 'pre-wrap'\n              },\n              children: fb.summary || '-'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 17\n            }, this), fb.scores && Object.values(fb.scores).some(s => s !== null) && /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 86\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"small mb-1\",\n                children: \"\\u8A55\\u5206\\u7D30\\u7BC0:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 93\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"ul\", {\n                className: \"list-inline small mb-0\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"list-inline-item me-3\",\n                  children: [\"\\u6E05: \", /*#__PURE__*/_jsxDEV(Badge, {\n                    pill: true,\n                    bg: getScore(fb.scores.clarity) >= 60 ? \"success\" : \"warning\",\n                    children: getScore(fb.scores.clarity)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 210\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 169\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"list-inline-item me-3\",\n                  children: [\"\\u540C: \", /*#__PURE__*/_jsxDEV(Badge, {\n                    pill: true,\n                    bg: getScore(fb.scores.empathy) >= 60 ? \"success\" : \"warning\",\n                    children: getScore(fb.scores.empathy)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 369\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 328\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"list-inline-item me-3\",\n                  children: [\"\\u81EA: \", /*#__PURE__*/_jsxDEV(Badge, {\n                    pill: true,\n                    bg: getScore(fb.scores.confidence) >= 60 ? \"success\" : \"warning\",\n                    children: getScore(fb.scores.confidence)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 528\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 487\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"list-inline-item me-3\",\n                  children: [\"\\u9069: \", /*#__PURE__*/_jsxDEV(Badge, {\n                    pill: true,\n                    bg: getScore(fb.scores.appropriateness) >= 60 ? \"success\" : \"warning\",\n                    children: getScore(fb.scores.appropriateness)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 693\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 652\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                  className: \"list-inline-item\",\n                  children: [\"\\u9054: \", /*#__PURE__*/_jsxDEV(Badge, {\n                    pill: true,\n                    bg: getScore(fb.scores.goalAchievement) >= 60 ? \"success\" : \"warning\",\n                    children: getScore(fb.scores.goalAchievement)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 170,\n                    columnNumber: 863\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 827\n                }, this), \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 129\n              }, this), \" \"]\n            }, void 0, true)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 15\n          }, this)]\n        }, fb.timestamp, true, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 13\n        }, this)) : /*#__PURE__*/_jsxDEV(Alert, {\n          variant: \"secondary\",\n          className: \"text-center\",\n          children: characterSearch || goalSearch ? '找不到符合篩選條件的回饋記錄。' : '還沒有任何回饋記錄。'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }, this)\n  );\n}\n_s(FeedbackWall, \"tU4k4GLijXbxJh7aaWQy5FXNIBI=\");\n_c = FeedbackWall;\nexport default FeedbackWall;\nvar _c;\n$RefreshReg$(_c, \"FeedbackWall\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","Container","Row","Col","Card","Alert","Badge","InputGroup","Form","Button","Collapse","FeedbackChart","jsxDEV","_jsxDEV","Fragment","_Fragment","FEEDBACK_STORAGE_KEY","FeedbackWall","_s","originalFeedbackHistory","setOriginalFeedbackHistory","filteredFeedbackHistory","setFilteredFeedbackHistory","characterSearch","setCharacterSearch","goalSearch","setGoalSearch","showFilters","setShowFilters","savedFeedback","localStorage","getItem","parsedFeedback","JSON","parse","Array","isArray","filter","fb","timestamp","sort","a","b","e","console","error","result","trim","lowerCaseSearch","toLowerCase","_fb$characterName","characterName","includes","lowerCaseGoal","_fb$goal","goal","clearFilters","recentFilteredFeedback","slice","reverse","chartLabels","map","index","arr","date","Date","dateString","toLocaleDateString","month","day","timeString","toLocaleTimeString","hour","minute","hour12","prevDateString","getScore","score","undefined","chartDataSets","label","data","_fb$scores","scores","clarity","backgroundColor","borderColor","borderWidth","_fb$scores2","empathy","_fb$scores3","confidence","_fb$scores4","appropriateness","_fb$scores5","goalAchievement","fluid","className","children","fileName","_jsxFileName","lineNumber","columnNumber","variant","size","onClick","in","id","md","Text","Control","type","placeholder","value","onChange","target","Header","length","Body","labels","datasets","toLocaleString","dateStyle","timeStyle","bg","text","Subtitle","style","whiteSpace","summary","Object","values","some","s","pill","_c","$RefreshReg$"],"sources":["C:/Users/Paul2/Downloads/front-end-main (5)/front-end-main/src/components/FeedbackWall/FeedbackWall.js"],"sourcesContent":["// src/components/FeedbackWall/FeedbackWall.js (將角色搜尋移入 Collapse)\n\nimport React, { useState, useEffect, useMemo } from 'react';\n// 導入需要的元件，包括 Collapse, InputGroup, Form\nimport { Container, Row, Col, Card, Alert, Badge, InputGroup, Form, Button, Collapse } from 'react-bootstrap';\nimport FeedbackChart from './FeedbackChart';\n// 假設 CSS 在同名文件或 App.css 中\nimport './FeedbackWall.css'; // 或者根據你的結構調整路徑\n\nconst FEEDBACK_STORAGE_KEY = 'wingchat_feedback';\n\nfunction FeedbackWall() {\n  const [originalFeedbackHistory, setOriginalFeedbackHistory] = useState([]);\n  const [filteredFeedbackHistory, setFilteredFeedbackHistory] = useState([]);\n  const [characterSearch, setCharacterSearch] = useState('');\n  const [goalSearch, setGoalSearch] = useState('');\n  const [showFilters, setShowFilters] = useState(true); // 篩選區域默認展開\n\n  // 加載原始數據\n  useEffect(() => {\n    const savedFeedback = localStorage.getItem(FEEDBACK_STORAGE_KEY);\n    let parsedFeedback = [];\n    if (savedFeedback) {\n      try {\n        parsedFeedback = JSON.parse(savedFeedback);\n        if (!Array.isArray(parsedFeedback)) parsedFeedback = [];\n        parsedFeedback = parsedFeedback\n          .filter(fb => typeof fb.timestamp === 'number')\n          .sort((a, b) => b.timestamp - a.timestamp);\n      } catch (e) { console.error(\"Failed to parse feedback history\", e); }\n    }\n    setOriginalFeedbackHistory(parsedFeedback);\n    setFilteredFeedbackHistory(parsedFeedback); // 初始顯示所有數據\n  }, []); // 僅在組件加載時運行一次\n\n  // 執行篩選邏輯\n  useEffect(() => {\n    let result = [...originalFeedbackHistory];\n\n    // 按角色名稱篩選\n    if (characterSearch.trim()) {\n      const lowerCaseSearch = characterSearch.trim().toLowerCase();\n      result = result.filter(fb =>\n        fb.characterName?.toLowerCase().includes(lowerCaseSearch)\n      );\n    }\n\n    // 按對話目標關鍵字篩選\n    if (goalSearch.trim()) {\n        const lowerCaseGoal = goalSearch.trim().toLowerCase();\n        result = result.filter(fb =>\n            fb.goal?.toLowerCase().includes(lowerCaseGoal)\n        );\n    }\n\n    // TODO: 在此添加分數範圍篩選邏輯\n\n    setFilteredFeedbackHistory(result);\n\n  }, [originalFeedbackHistory, characterSearch, goalSearch]);\n\n  // 清除所有篩選條件\n  const clearFilters = () => {\n      setCharacterSearch('');\n      setGoalSearch('');\n      // 如果有分數篩選，也要在這裡清除\n  }\n\n  // --- 準備圖表數據 (使用篩選後的數據) ---\n  const recentFilteredFeedback = filteredFeedbackHistory.slice(0, 5).reverse();\n  const chartLabels = recentFilteredFeedback.map((fb, index, arr) => { const date = new Date(fb.timestamp); const dateString = date.toLocaleDateString('zh-TW', { month: 'numeric', day: 'numeric' }); const timeString = date.toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit', hour12: false }); const prevDateString = index > 0 ? new Date(arr[index - 1].timestamp).toLocaleDateString('zh-TW', { month: 'numeric', day: 'numeric' }) : null; return dateString === prevDateString ? `${dateString} ${timeString}` : dateString; });\n  const getScore = (score) => (score === null || score === undefined ? 0 : score);\n  const chartDataSets = [ { label: '清晰度', data: recentFilteredFeedback.map(fb => getScore(fb.scores?.clarity)), backgroundColor: 'rgba(54, 162, 235, 0.6)', borderColor: 'rgba(54, 162, 235, 1)', borderWidth: 1 }, { label: '同理心', data: recentFilteredFeedback.map(fb => getScore(fb.scores?.empathy)), backgroundColor: 'rgba(255, 206, 86, 0.6)', borderColor: 'rgba(255, 206, 86, 1)', borderWidth: 1 }, { label: '自信', data: recentFilteredFeedback.map(fb => getScore(fb.scores?.confidence)), backgroundColor: 'rgba(75, 192, 192, 0.6)', borderColor: 'rgba(75, 192, 192, 1)', borderWidth: 1 }, { label: '適當性', data: recentFilteredFeedback.map(fb => getScore(fb.scores?.appropriateness)), backgroundColor: 'rgba(153, 102, 255, 0.6)', borderColor: 'rgba(153, 102, 255, 1)', borderWidth: 1 }, { label: '目標達成', data: recentFilteredFeedback.map(fb => getScore(fb.scores?.goalAchievement)), backgroundColor: 'rgba(255, 99, 132, 0.6)', borderColor: 'rgba(255, 99, 132, 1)', borderWidth: 1 }, ];\n\n  return (\n    // 使用 Container 和 CSS class 進行佈局\n    <Container fluid className=\"feedback-wall-container p-0 d-flex flex-column\">\n\n      {/* --- 固定的頭部區域 (僅標題和描述) --- */}\n      <div className=\"feedback-wall-header\">\n        <h2 className=\"mb-2\">回饋牆</h2>\n        <p className=\"text-muted mb-0\">這裡彙總了你每次請求 AI 回饋的結果，觀察你的進步趨勢吧！</p>\n      </div>\n\n      {/* --- 可收起的篩選控制項區域 --- */}\n      <div className=\"feedback-filters-container\">\n        <div className=\"d-flex justify-content-between align-items-center mb-2\">\n          <h6 className=\"mb-0 text-muted small\">搜尋與篩選</h6>\n          <Button\n            variant=\"link\"\n            size=\"sm\"\n            onClick={() => setShowFilters(!showFilters)}\n            aria-controls=\"collapse-feedback-filters\"\n            aria-expanded={showFilters}\n            className=\"p-0 text-secondary\"\n          >\n            {showFilters ? '收起' : '展開'} <i className={`bi bi-chevron-${showFilters ? 'up' : 'down'}`}></i>\n          </Button>\n        </div>\n        <Collapse in={showFilters}>\n          <div id=\"collapse-feedback-filters\">\n            {/* --- 使用 Row 和 Col 並排顯示搜尋框 --- */}\n            <Row className=\"g-2 mb-2\"> {/* 添加 mb-2 給下方按鈕留空間 */}\n              <Col md={6}>\n                <InputGroup size=\"sm\">\n                  <InputGroup.Text><i className=\"bi bi-person\"></i></InputGroup.Text>\n                  <Form.Control\n                    type=\"text\"\n                    placeholder=\"搜尋角色名稱...\"\n                    value={characterSearch}\n                    onChange={(e) => setCharacterSearch(e.target.value)}\n                  />\n                </InputGroup>\n              </Col>\n              <Col md={6}>\n                <InputGroup size=\"sm\">\n                  <InputGroup.Text><i className=\"bi bi-chat-dots\"></i></InputGroup.Text>\n                  <Form.Control\n                    type=\"text\"\n                    placeholder=\"搜尋對話目標關鍵字...\"\n                    value={goalSearch}\n                    onChange={(e) => setGoalSearch(e.target.value)}\n                  />\n                </InputGroup>\n              </Col>\n            </Row>\n            {/* TODO: 在此處添加分數範圍篩選器 */}\n\n            {/* 清除按鈕 */}\n            {(characterSearch || goalSearch) && (\n              <Button variant=\"outline-secondary\" size=\"sm\" onClick={clearFilters} className=\"w-100\">\n                 <i className=\"bi bi-x-lg\"></i> 清除所有篩選\n              </Button>\n            )}\n          </div>\n        </Collapse>\n      </div>\n      {/* --- 結束篩選控制項區域 --- */}\n\n\n      {/* --- 可滾動的內容區域 --- */}\n      <div className=\"feedback-wall-body\">\n        {/* 圖表區域 */}\n        <Card className=\"mb-4 shadow-sm\">\n          <Card.Header>最近 {recentFilteredFeedback.length} 次符合篩選的練習表現趨勢</Card.Header>\n          <Card.Body>\n            {filteredFeedbackHistory.length > 0 ? (\n              recentFilteredFeedback.length > 0 ? (\n                 <FeedbackChart labels={chartLabels} datasets={chartDataSets} />\n              ) : ( <Alert variant=\"light\" className=\"text-center\">沒有最近的回饋數據可供繪製趨勢圖。</Alert> )\n            ) : ( <Alert variant=\"light\" className=\"text-center\">{characterSearch || goalSearch ? '找不到符合篩選條件的回饋記錄。' : '還沒有任何回饋記錄。'}</Alert> )}\n          </Card.Body>\n        </Card>\n\n        {/* 歷史回饋列表 */}\n        <h4 className=\"h5 mb-3\">詳細回饋記錄 ({filteredFeedbackHistory.length} 筆)</h4>\n        {filteredFeedbackHistory.length > 0 ? (\n          filteredFeedbackHistory.map((fb) => (\n            <Card key={fb.timestamp} className=\"shadow-sm\">\n              <Card.Header className=\"d-flex justify-content-between align-items-center small text-muted flex-wrap\">\n                <span>{new Date(fb.timestamp).toLocaleString('zh-TW', { dateStyle: 'short', timeStyle: 'short' })}</span>\n                <div className=\"mt-1 mt-md-0\">\n                  <Badge bg=\"secondary\" className=\"me-2\">角色: {fb.characterName || '未知'}</Badge>\n                  <Badge bg=\"info\" text=\"dark\">目標: {fb.goal || '未知'}</Badge>\n                </div>\n              </Card.Header>\n              <Card.Body>\n                <Card.Subtitle className=\"mb-2 text-muted\">AI 總結:</Card.Subtitle>\n                <p style={{ whiteSpace: 'pre-wrap' }}>{fb.summary || '-'}</p>\n                {fb.scores && Object.values(fb.scores).some(s => s !== null) && ( <> <hr /> <p className=\"small mb-1\">評分細節:</p> <ul className=\"list-inline small mb-0\"> <li className=\"list-inline-item me-3\">清: <Badge pill bg={getScore(fb.scores.clarity) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.clarity)}</Badge></li> <li className=\"list-inline-item me-3\">同: <Badge pill bg={getScore(fb.scores.empathy) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.empathy)}</Badge></li> <li className=\"list-inline-item me-3\">自: <Badge pill bg={getScore(fb.scores.confidence) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.confidence)}</Badge></li> <li className=\"list-inline-item me-3\">適: <Badge pill bg={getScore(fb.scores.appropriateness) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.appropriateness)}</Badge></li> <li className=\"list-inline-item\">達: <Badge pill bg={getScore(fb.scores.goalAchievement) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.goalAchievement)}</Badge></li> </ul> </> )}\n              </Card.Body>\n            </Card>\n          ))\n        ) : ( <Alert variant=\"secondary\" className=\"text-center\">{characterSearch || goalSearch ? '找不到符合篩選條件的回饋記錄。' : '還沒有任何回饋記錄。'}</Alert> )}\n      </div>\n    </Container>\n  );\n}\n\nexport default FeedbackWall;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}