{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Paul2\\\\onedrive\\\\\\u684C\\u9762\\\\llm_dialougue_v4\\\\wingchat-app\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\nimport AppNavbar from './components/common/AppNavbar';\nimport TrainingRoom from './components/TrainingRoom/TrainingRoom';\nimport CharacterHall from './components/CharacterHall/CharacterHall';\nimport FeedbackWall from './components/FeedbackWall/FeedbackWall';\nimport './styles/App.css';\n\n// 本地儲存的 Key\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CHARACTERS_STORAGE_KEY = 'wingchat_characters';\nfunction App() {\n  _s();\n  const [activeView, setActiveView] = useState('training'); // 'training', 'characters', 'feedback'\n  const [characters, setCharacters] = useState(() => {\n    // 從 localStorage 加載初始角色，或使用預設值\n    const savedCharacters = localStorage.getItem(CHARACTERS_STORAGE_KEY);\n    if (savedCharacters) {\n      try {\n        return JSON.parse(savedCharacters);\n      } catch (e) {\n        console.error(\"Failed to parse characters from localStorage\", e);\n        return [{\n          id: 'default',\n          name: '預設助手',\n          description: '我是 WingChat，一個友善且樂於助人的 AI 社交教練。'\n        }];\n      }\n    }\n    return [{\n      id: 'default',\n      name: '預設助手',\n      description: '我是 WingChat，一個友善且樂於助人的 AI 社交教練。'\n    }];\n  });\n  const [selectedCharacter, setSelectedCharacter] = useState(characters.length > 0 ? characters[0] : null); // 預設選中第一個\n\n  // 當 characters 狀態改變時，保存到 localStorage\n  useEffect(() => {\n    localStorage.setItem(CHARACTERS_STORAGE_KEY, JSON.stringify(characters));\n  }, [characters]);\n\n  // 更新角色列表處理函數\n  const handleUpdateCharacters = newCharacters => {\n    setCharacters(newCharacters);\n    // 檢查當前選中角色是否還存在\n    if (selectedCharacter && !newCharacters.find(c => c.id === selectedCharacter.id)) {\n      setSelectedCharacter(newCharacters.length > 0 ? newCharacters[0] : null); // 如果不存在，選第一個或設為 null\n    } else if (!selectedCharacter && newCharacters.length > 0) {\n      setSelectedCharacter(newCharacters[0]); // 如果之前沒有選中，現在有了就選第一個\n    }\n  };\n\n  // 選擇角色處理函數\n  const handleSelectCharacter = character => {\n    setSelectedCharacter(character);\n    setActiveView('training'); // 選完角色自動跳回訓練室\n  };\n\n  // 渲染當前視圖\n  const renderView = () => {\n    switch (activeView) {\n      case 'characters':\n        return /*#__PURE__*/_jsxDEV(CharacterHall, {\n          characters: characters,\n          onUpdateCharacters: handleUpdateCharacters,\n          onSelectCharacter: handleSelectCharacter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 16\n        }, this);\n      case 'feedback':\n        // TODO: FeedbackWall 需要接收聊天記錄或其他分析數據\n        // 這裡暫時只渲染基本組件\n        return /*#__PURE__*/_jsxDEV(FeedbackWall, {\n          chatHistory: []\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 16\n        }, this);\n      // 假設未來會傳入聊天記錄\n      case 'training':\n      default:\n        return /*#__PURE__*/_jsxDEV(TrainingRoom, {\n          selectedCharacter: selectedCharacter\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(AppNavbar, {\n      onSelectView: setActiveView,\n      currentView: activeView\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      className: \"main-content mt-3\",\n      children: renderView()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"HghNhmUvwWdVKS8vohPiJs+y3MU=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Container","AppNavbar","TrainingRoom","CharacterHall","FeedbackWall","jsxDEV","_jsxDEV","CHARACTERS_STORAGE_KEY","App","_s","activeView","setActiveView","characters","setCharacters","savedCharacters","localStorage","getItem","JSON","parse","e","console","error","id","name","description","selectedCharacter","setSelectedCharacter","length","setItem","stringify","handleUpdateCharacters","newCharacters","find","c","handleSelectCharacter","character","renderView","onUpdateCharacters","onSelectCharacter","fileName","_jsxFileName","lineNumber","columnNumber","chatHistory","className","children","onSelectView","currentView","fluid","_c","$RefreshReg$"],"sources":["C:/Users/Paul2/onedrive/桌面/llm_dialougue_v4/wingchat-app/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\nimport AppNavbar from './components/common/AppNavbar';\nimport TrainingRoom from './components/TrainingRoom/TrainingRoom';\nimport CharacterHall from './components/CharacterHall/CharacterHall';\nimport FeedbackWall from './components/FeedbackWall/FeedbackWall';\nimport './styles/App.css';\n\n// 本地儲存的 Key\nconst CHARACTERS_STORAGE_KEY = 'wingchat_characters';\n\nfunction App() {\n  const [activeView, setActiveView] = useState('training'); // 'training', 'characters', 'feedback'\n  const [characters, setCharacters] = useState(() => {\n    // 從 localStorage 加載初始角色，或使用預設值\n    const savedCharacters = localStorage.getItem(CHARACTERS_STORAGE_KEY);\n    if (savedCharacters) {\n      try {\n        return JSON.parse(savedCharacters);\n      } catch (e) {\n        console.error(\"Failed to parse characters from localStorage\", e);\n        return [{ id: 'default', name: '預設助手', description: '我是 WingChat，一個友善且樂於助人的 AI 社交教練。' }];\n      }\n    }\n    return [{ id: 'default', name: '預設助手', description: '我是 WingChat，一個友善且樂於助人的 AI 社交教練。' }];\n  });\n  const [selectedCharacter, setSelectedCharacter] = useState(characters.length > 0 ? characters[0] : null); // 預設選中第一個\n\n  // 當 characters 狀態改變時，保存到 localStorage\n  useEffect(() => {\n    localStorage.setItem(CHARACTERS_STORAGE_KEY, JSON.stringify(characters));\n  }, [characters]);\n\n  // 更新角色列表處理函數\n  const handleUpdateCharacters = (newCharacters) => {\n    setCharacters(newCharacters);\n    // 檢查當前選中角色是否還存在\n    if (selectedCharacter && !newCharacters.find(c => c.id === selectedCharacter.id)) {\n      setSelectedCharacter(newCharacters.length > 0 ? newCharacters[0] : null); // 如果不存在，選第一個或設為 null\n    } else if (!selectedCharacter && newCharacters.length > 0) {\n        setSelectedCharacter(newCharacters[0]); // 如果之前沒有選中，現在有了就選第一個\n    }\n  };\n\n  // 選擇角色處理函數\n  const handleSelectCharacter = (character) => {\n    setSelectedCharacter(character);\n    setActiveView('training'); // 選完角色自動跳回訓練室\n  };\n\n  // 渲染當前視圖\n  const renderView = () => {\n    switch (activeView) {\n      case 'characters':\n        return <CharacterHall\n                  characters={characters}\n                  onUpdateCharacters={handleUpdateCharacters}\n                  onSelectCharacter={handleSelectCharacter}\n                />;\n      case 'feedback':\n        // TODO: FeedbackWall 需要接收聊天記錄或其他分析數據\n        // 這裡暫時只渲染基本組件\n        return <FeedbackWall chatHistory={[]} />; // 假設未來會傳入聊天記錄\n      case 'training':\n      default:\n        return <TrainingRoom selectedCharacter={selectedCharacter} />;\n    }\n  };\n\n  return (\n    <div className=\"app-container\">\n      <AppNavbar onSelectView={setActiveView} currentView={activeView} />\n      <Container fluid className=\"main-content mt-3\">\n        {renderView()}\n      </Container>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}