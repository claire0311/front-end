{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Paul2\\\\Downloads\\\\front-end-main (5)\\\\front-end-main\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\n// src/App.js (完整版 - 包含傳遞給 TrainingRoom 的 props)\n\nimport React, { useState, useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\nimport AppNavbar from './components/common/AppNavbar';\nimport TrainingRoom from './components/TrainingRoom/TrainingRoom';\nimport CharacterHall from './components/CharacterHall/CharacterHall';\nimport FeedbackWall from './components/FeedbackWall/FeedbackWall';\nimport './styles/App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CHARACTERS_STORAGE_KEY = 'wingchat_characters';\nconst FEEDBACK_STORAGE_KEY = 'wingchat_feedback';\nfunction App() {\n  _s();\n  const [activeView, setActiveView] = useState('training');\n  const [characters, setCharacters] = useState(() => {\n    const savedCharacters = localStorage.getItem(CHARACTERS_STORAGE_KEY);\n    if (savedCharacters) {\n      try {\n        const parsed = JSON.parse(savedCharacters);\n        // 確保至少有預設角色\n        if (Array.isArray(parsed) && parsed.length > 0) {\n          // 可以檢查是否包含預設角色，如果沒有可以添加回去\n          if (!parsed.find(c => c.id === 'default')) {\n            return [{\n              id: 'default',\n              name: '預設助手',\n              description: '...'\n            }, ...parsed];\n          }\n          return parsed;\n        }\n      } catch (e) {\n        console.error(\"Failed to parse characters\", e);\n      }\n    }\n    // 如果讀取失敗或為空，返回預設角色\n    return [{\n      id: 'default',\n      name: '預設助手',\n      description: '我是 WingChat，一個友善且樂於助人的 AI 社交教練。'\n    }];\n  });\n  const [selectedCharacter, setSelectedCharacter] = useState(characters[0]); // 初始選中第一個\n\n  useEffect(() => {\n    localStorage.setItem(CHARACTERS_STORAGE_KEY, JSON.stringify(characters));\n  }, [characters]);\n  const handleUpdateCharacters = newCharacters => {\n    setCharacters(newCharacters);\n    if (selectedCharacter && !newCharacters.find(c => c.id === selectedCharacter.id)) {\n      setSelectedCharacter(newCharacters.length > 0 ? newCharacters[0] : null);\n    } else if (!selectedCharacter && newCharacters.length > 0) {\n      setSelectedCharacter(newCharacters[0]);\n    }\n    // 如果刪到只剩0個自訂，確保還有預設\n    if (newCharacters.length === 0) {\n      setCharacters([{\n        id: 'default',\n        name: '預設助手',\n        description: '我是 WingChat...'\n      }]);\n      setSelectedCharacter(characters[0]); // 此時 characters[0] 應該是預設\n    }\n  };\n\n  // 這個函數現在會被 CharacterHall 和 TrainingRoom 調用\n  const handleSelectCharacter = character => {\n    if (character) {\n      // 確保傳入的是有效的 character 對象\n      setSelectedCharacter(character);\n      // 從角色館點擊時跳轉回訓練室\n      if (activeView !== 'training') {\n        setActiveView('training');\n      }\n    } else {\n      console.warn(\"Attempted to select a null character.\");\n      // 可以選擇設置為預設角色，或保持不變\n      // setSelectedCharacter(characters[0]);\n    }\n  };\n  const renderView = () => {\n    switch (activeView) {\n      case 'characters':\n        return /*#__PURE__*/_jsxDEV(CharacterHall, {\n          characters: characters,\n          onUpdateCharacters: handleUpdateCharacters,\n          onSelectCharacter: handleSelectCharacter // 傳遞函數\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 16\n        }, this);\n      case 'feedback':\n        return /*#__PURE__*/_jsxDEV(FeedbackWall, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 16\n        }, this);\n      case 'training':\n      default:\n        // --- 將必要的 props 傳遞給 TrainingRoom ---\n        return /*#__PURE__*/_jsxDEV(TrainingRoom, {\n          characters: characters // 角色列表\n          ,\n          selectedCharacter: selectedCharacter // 當前選中\n          ,\n          onSelectCharacter: handleSelectCharacter // 選擇函數\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 16\n        }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(AppNavbar, {\n      onSelectView: setActiveView,\n      currentView: activeView\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      fluid: true,\n      className: `main-content ${activeView === 'training' ? 'no-scroll p-0' : 'p-3'} d-flex flex-column`,\n      children: renderView()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"Dskbqou1s5Fj32b+rzDUd6pcCW0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","Container","AppNavbar","TrainingRoom","CharacterHall","FeedbackWall","jsxDEV","_jsxDEV","CHARACTERS_STORAGE_KEY","FEEDBACK_STORAGE_KEY","App","_s","activeView","setActiveView","characters","setCharacters","savedCharacters","localStorage","getItem","parsed","JSON","parse","Array","isArray","length","find","c","id","name","description","e","console","error","selectedCharacter","setSelectedCharacter","setItem","stringify","handleUpdateCharacters","newCharacters","handleSelectCharacter","character","warn","renderView","onUpdateCharacters","onSelectCharacter","fileName","_jsxFileName","lineNumber","columnNumber","className","children","onSelectView","currentView","fluid","_c","$RefreshReg$"],"sources":["C:/Users/Paul2/Downloads/front-end-main (5)/front-end-main/src/App.js"],"sourcesContent":["// src/App.js (完整版 - 包含傳遞給 TrainingRoom 的 props)\n\nimport React, { useState, useEffect } from 'react';\nimport { Container } from 'react-bootstrap';\nimport AppNavbar from './components/common/AppNavbar';\nimport TrainingRoom from './components/TrainingRoom/TrainingRoom';\nimport CharacterHall from './components/CharacterHall/CharacterHall';\nimport FeedbackWall from './components/FeedbackWall/FeedbackWall';\nimport './styles/App.css';\n\nconst CHARACTERS_STORAGE_KEY = 'wingchat_characters';\nconst FEEDBACK_STORAGE_KEY = 'wingchat_feedback';\n\nfunction App() {\n  const [activeView, setActiveView] = useState('training');\n  const [characters, setCharacters] = useState(() => {\n    const savedCharacters = localStorage.getItem(CHARACTERS_STORAGE_KEY);\n    if (savedCharacters) {\n      try {\n        const parsed = JSON.parse(savedCharacters);\n        // 確保至少有預設角色\n        if (Array.isArray(parsed) && parsed.length > 0) {\n            // 可以檢查是否包含預設角色，如果沒有可以添加回去\n            if (!parsed.find(c => c.id === 'default')) {\n                 return [{ id: 'default', name: '預設助手', description: '...' }, ...parsed];\n            }\n            return parsed;\n        }\n      } catch (e) { console.error(\"Failed to parse characters\", e); }\n    }\n    // 如果讀取失敗或為空，返回預設角色\n    return [{ id: 'default', name: '預設助手', description: '我是 WingChat，一個友善且樂於助人的 AI 社交教練。' }];\n  });\n  const [selectedCharacter, setSelectedCharacter] = useState(characters[0]); // 初始選中第一個\n\n  useEffect(() => {\n    localStorage.setItem(CHARACTERS_STORAGE_KEY, JSON.stringify(characters));\n  }, [characters]);\n\n  const handleUpdateCharacters = (newCharacters) => {\n    setCharacters(newCharacters);\n    if (selectedCharacter && !newCharacters.find(c => c.id === selectedCharacter.id)) {\n      setSelectedCharacter(newCharacters.length > 0 ? newCharacters[0] : null);\n    } else if (!selectedCharacter && newCharacters.length > 0) {\n        setSelectedCharacter(newCharacters[0]);\n    }\n    // 如果刪到只剩0個自訂，確保還有預設\n    if (newCharacters.length === 0) {\n        setCharacters([{ id: 'default', name: '預設助手', description: '我是 WingChat...' }]);\n        setSelectedCharacter(characters[0]); // 此時 characters[0] 應該是預設\n    }\n  };\n\n  // 這個函數現在會被 CharacterHall 和 TrainingRoom 調用\n  const handleSelectCharacter = (character) => {\n    if (character) { // 確保傳入的是有效的 character 對象\n        setSelectedCharacter(character);\n        // 從角色館點擊時跳轉回訓練室\n        if (activeView !== 'training') {\n          setActiveView('training');\n        }\n    } else {\n        console.warn(\"Attempted to select a null character.\");\n        // 可以選擇設置為預設角色，或保持不變\n        // setSelectedCharacter(characters[0]);\n    }\n  };\n\n  const renderView = () => {\n    switch (activeView) {\n      case 'characters':\n        return <CharacterHall\n                  characters={characters}\n                  onUpdateCharacters={handleUpdateCharacters}\n                  onSelectCharacter={handleSelectCharacter} // 傳遞函數\n                />;\n      case 'feedback':\n        return <FeedbackWall />;\n      case 'training':\n      default:\n        // --- 將必要的 props 傳遞給 TrainingRoom ---\n        return <TrainingRoom\n                  characters={characters}             // 角色列表\n                  selectedCharacter={selectedCharacter} // 當前選中\n                  onSelectCharacter={handleSelectCharacter} // 選擇函數\n               />;\n    }\n  };\n\n  return (\n    <div className=\"app-container\">\n      <AppNavbar onSelectView={setActiveView} currentView={activeView} />\n      <Container fluid className={`main-content ${activeView === 'training' ? 'no-scroll p-0' : 'p-3'} d-flex flex-column`}>\n        {renderView()}\n      </Container>\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}