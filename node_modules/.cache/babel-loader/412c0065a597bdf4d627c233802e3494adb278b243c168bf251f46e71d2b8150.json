{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Paul2\\\\Downloads\\\\front-end-main (5)\\\\front-end-main\\\\src\\\\components\\\\CharacterHall\\\\CharacterEvalModal.js\",\n  _s = $RefreshSig$();\n// src/components/CharacterHall/CharacterEvalModal.js (添加固定搜尋/篩選和收起功能)\n\nimport React, { useState, useEffect } from 'react';\n// --- 導入 Collapse, Form, InputGroup ---\nimport { Modal, Button, Alert, ListGroup, Badge, Collapse, Form, InputGroup } from 'react-bootstrap';\nimport FeedbackChart from '../FeedbackWall/FeedbackChart';\nimport './CharacterHall.css'; // 確保導入了 CSS\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FEEDBACK_STORAGE_KEY = 'wingchat_feedback';\nfunction CharacterEvalModal({\n  show,\n  onHide,\n  character\n}) {\n  _s();\n  const [originalCharacterFeedback, setOriginalCharacterFeedback] = useState([]);\n  const [filteredCharacterFeedback, setFilteredCharacterFeedback] = useState([]);\n  const [goalSearchModal, setGoalSearchModal] = useState('');\n  const [showFilters, setShowFilters] = useState(true); // <<<--- 新增狀態控制篩選區域顯示\n\n  useEffect(() => {\n    /* ... (加載數據邏輯保持不變) ... */if (show && character) {\n      const savedFeedback = localStorage.getItem(FEEDBACK_STORAGE_KEY);\n      let allFeedback = [];\n      if (savedFeedback) {\n        try {\n          allFeedback = JSON.parse(savedFeedback);\n          if (!Array.isArray(allFeedback)) allFeedback = [];\n        } catch (e) {\n          console.error(\"Parsing feedback failed\", e);\n        }\n      }\n      const filtered = allFeedback.filter(fb => fb.characterId === character.id && typeof fb.timestamp === 'number').sort((a, b) => b.timestamp - a.timestamp);\n      setOriginalCharacterFeedback(filtered);\n      setFilteredCharacterFeedback(filtered);\n      setGoalSearchModal('');\n      setShowFilters(true); /* 每次打開默認展開 */\n    } else {\n      setOriginalCharacterFeedback([]);\n      setFilteredCharacterFeedback([]);\n      setGoalSearchModal('');\n    }\n  }, [show, character]);\n  useEffect(() => {\n    /* ... (篩選邏輯保持不變) ... */if (!show) return;\n    let result = [...originalCharacterFeedback];\n    if (goalSearchModal.trim()) {\n      const lowerCaseGoal = goalSearchModal.trim().toLowerCase();\n      result = result.filter(fb => {\n        var _fb$goal;\n        return (_fb$goal = fb.goal) === null || _fb$goal === void 0 ? void 0 : _fb$goal.toLowerCase().includes(lowerCaseGoal);\n      });\n    }\n    setFilteredCharacterFeedback(result);\n  }, [originalCharacterFeedback, goalSearchModal, show]);\n  const recentEvalFeedback = filteredCharacterFeedback.slice(0, 5).reverse();\n  const chartLabels = recentEvalFeedback.map(fb => new Date(fb.timestamp).toLocaleDateString('zh-TW', {\n    month: 'numeric',\n    day: 'numeric'\n  }));\n  const getScore = score => score === null || score === undefined ? 0 : score;\n  const chartDataSets = [/* ... (保持不變) ... */{\n    label: '清晰度',\n    data: recentEvalFeedback.map(fb => {\n      var _fb$scores;\n      return getScore((_fb$scores = fb.scores) === null || _fb$scores === void 0 ? void 0 : _fb$scores.clarity);\n    }),\n    backgroundColor: 'rgba(54, 162, 235, 0.6)'\n  }, {\n    label: '同理心',\n    data: recentEvalFeedback.map(fb => {\n      var _fb$scores2;\n      return getScore((_fb$scores2 = fb.scores) === null || _fb$scores2 === void 0 ? void 0 : _fb$scores2.empathy);\n    }),\n    backgroundColor: 'rgba(255, 206, 86, 0.6)'\n  }, {\n    label: '自信',\n    data: recentEvalFeedback.map(fb => {\n      var _fb$scores3;\n      return getScore((_fb$scores3 = fb.scores) === null || _fb$scores3 === void 0 ? void 0 : _fb$scores3.confidence);\n    }),\n    backgroundColor: 'rgba(75, 192, 192, 0.6)'\n  }, {\n    label: '適當性',\n    data: recentEvalFeedback.map(fb => {\n      var _fb$scores4;\n      return getScore((_fb$scores4 = fb.scores) === null || _fb$scores4 === void 0 ? void 0 : _fb$scores4.appropriateness);\n    }),\n    backgroundColor: 'rgba(153, 102, 255, 0.6)'\n  }, {\n    label: '目標達成',\n    data: recentEvalFeedback.map(fb => {\n      var _fb$scores5;\n      return getScore((_fb$scores5 = fb.scores) === null || _fb$scores5 === void 0 ? void 0 : _fb$scores5.goalAchievement);\n    }),\n    backgroundColor: 'rgba(255, 99, 132, 0.6)'\n  }].map(ds => ({\n    ...ds,\n    borderColor: ds.backgroundColor.replace('0.6', '1'),\n    borderWidth: 1\n  }));\n  return (\n    /*#__PURE__*/\n    // --- 修改 Modal 結構以支持 Flexbox 佈局 ---\n    _jsxDEV(Modal, {\n      show: show,\n      onHide: onHide,\n      centered: true,\n      size: \"lg\",\n      dialogClassName: \"character-eval-modal-dialog\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: [\"\\u8207 \\\"\", character === null || character === void 0 ? void 0 : character.name, \"\\\" \\u7684\\u5C0D\\u8A71\\u8A55\\u4F30\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        className: \"d-flex flex-column p-0 character-eval-modal-body\",\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"character-eval-filters bg-light p-3 border-bottom\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-between align-items-center mb-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n              className: \"mb-0 text-muted small\",\n              children: \"\\u641C\\u5C0B\\u8207\\u7BE9\\u9078\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 39,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"link\",\n              size: \"sm\",\n              onClick: () => setShowFilters(!showFilters),\n              \"aria-controls\": \"collapse-filters\",\n              \"aria-expanded\": showFilters,\n              className: \"p-0 text-secondary\",\n              children: [showFilters ? '收起' : '展開', \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n                className: `bi bi-chevron-${showFilters ? 'up' : 'down'}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 48,\n                columnNumber: 44\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 40,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 38,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n            in: showFilters,\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              id: \"collapse-filters\",\n              children: [/*#__PURE__*/_jsxDEV(InputGroup, {\n                size: \"sm\",\n                children: [/*#__PURE__*/_jsxDEV(InputGroup.Text, {\n                  children: /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"bi bi-search\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 55,\n                    columnNumber: 35\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 55,\n                  columnNumber: 18\n                }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                  type: \"text\",\n                  placeholder: \"\\u641C\\u5C0B\\u6B64\\u89D2\\u8272\\u7684\\u5C0D\\u8A71\\u76EE\\u6A19...\",\n                  value: goalSearchModal,\n                  onChange: e => setGoalSearchModal(e.target.value)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 56,\n                  columnNumber: 18\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 54,\n                columnNumber: 16\n              }, this), goalSearchModal &&\n              /*#__PURE__*/\n              // 只有在有搜尋條件時才顯示清除按鈕\n              _jsxDEV(Button, {\n                variant: \"outline-secondary\",\n                size: \"sm\",\n                onClick: () => setGoalSearchModal(''),\n                className: \"mt-2 w-100\",\n                children: \"\\u6E05\\u9664\\u76EE\\u6A19\\u641C\\u5C0B\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 65,\n                columnNumber: 18\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 14\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 37,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"character-eval-content flex-grow-1 overflow-auto p-3\",\n          children: [\" \", originalCharacterFeedback.length > 0 ? filteredCharacterFeedback.length > 0 ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [recentEvalFeedback.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mb-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n                className: \"text-center mb-3\",\n                children: [\"\\u6700\\u8FD1 \", recentEvalFeedback.length, \" \\u6B21\\u8868\\u73FE\\u8DA8\\u52E2\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 83,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(FeedbackChart, {\n                labels: chartLabels,\n                datasets: chartDataSets\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 84,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 17\n            }, this), recentEvalFeedback.length > 0 && /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 49\n            }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"mb-3\",\n              children: [\"\\u8A73\\u7D30\\u56DE\\u994B\\u8A18\\u9304 (\", filteredCharacterFeedback.length, \" \\u7B46)\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ListGroup, {\n              variant: \"flush\",\n              children: [...filteredCharacterFeedback].map(fb =>\n              /*#__PURE__*/\n              // 改回降序顯示\n              _jsxDEV(ListGroup.Item, {\n                className: \"px-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-flex justify-content-between align-items-center mb-2\",\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-muted\",\n                    children: [\" \", new Date(fb.timestamp).toLocaleString('zh-TW', {\n                      dateStyle: 'short',\n                      timeStyle: 'short'\n                    }), \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 95\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(Badge, {\n                    bg: \"light\",\n                    text: \"dark\",\n                    children: [\"\\u76EE\\u6A19: \", fb.goal || '未指定']\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 228\n                  }, this), \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 22\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"h6\", {\n                  children: \"AI \\u7E3D\\u7D50:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 296\n                }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    whiteSpace: 'pre-wrap',\n                    fontSize: '0.95em'\n                  },\n                  children: fb.summary || '-'\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 312\n                }, this), \" \", fb.scores && Object.values(fb.scores).some(s => s !== null) && /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"small mb-1\",\n                    children: \"\\u8A55\\u5206:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 463\n                  }, this), \" \", /*#__PURE__*/_jsxDEV(\"ul\", {\n                    className: \"list-inline small mb-0\",\n                    children: [\" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                      className: \"list-inline-item me-2\",\n                      children: [\"\\u6E05: \", /*#__PURE__*/_jsxDEV(Badge, {\n                        pill: true,\n                        bg: getScore(fb.scores.clarity) >= 60 ? \"success\" : \"warning\",\n                        children: getScore(fb.scores.clarity)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 94,\n                        columnNumber: 578\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 94,\n                      columnNumber: 537\n                    }, this), \" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                      className: \"list-inline-item me-2\",\n                      children: [\"\\u540C: \", /*#__PURE__*/_jsxDEV(Badge, {\n                        pill: true,\n                        bg: getScore(fb.scores.empathy) >= 60 ? \"success\" : \"warning\",\n                        children: getScore(fb.scores.empathy)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 94,\n                        columnNumber: 737\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 94,\n                      columnNumber: 696\n                    }, this), \" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                      className: \"list-inline-item me-2\",\n                      children: [\"\\u81EA: \", /*#__PURE__*/_jsxDEV(Badge, {\n                        pill: true,\n                        bg: getScore(fb.scores.confidence) >= 60 ? \"success\" : \"warning\",\n                        children: getScore(fb.scores.confidence)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 94,\n                        columnNumber: 896\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 94,\n                      columnNumber: 855\n                    }, this), \" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                      className: \"list-inline-item me-2\",\n                      children: [\"\\u9069: \", /*#__PURE__*/_jsxDEV(Badge, {\n                        pill: true,\n                        bg: getScore(fb.scores.appropriateness) >= 60 ? \"success\" : \"warning\",\n                        children: getScore(fb.scores.appropriateness)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 94,\n                        columnNumber: 1061\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 94,\n                      columnNumber: 1020\n                    }, this), \" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                      className: \"list-inline-item\",\n                      children: [\"\\u9054: \", /*#__PURE__*/_jsxDEV(Badge, {\n                        pill: true,\n                        bg: getScore(fb.scores.goalAchievement) >= 60 ? \"success\" : \"warning\",\n                        children: getScore(fb.scores.goalAchievement)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 94,\n                        columnNumber: 1231\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 94,\n                      columnNumber: 1195\n                    }, this), \" \"]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 497\n                  }, this), \" \"]\n                }, void 0, true)]\n              }, fb.timestamp, true, {\n                fileName: _jsxFileName,\n                lineNumber: 92,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"warning\",\n            children: [\"\\u627E\\u4E0D\\u5230\\u7B26\\u5408\\u76EE\\u6A19\\u95DC\\u9375\\u5B57 \\\"\", goalSearchModal, \"\\\" \\u7684\\u8A18\\u9304\\u3002\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"info\",\n            children: \"\\u9084\\u6C92\\u6709\\u8207\\u6B64\\u89D2\\u8272\\u7684\\u5C0D\\u8A71\\u8A55\\u4F30\\u8A18\\u9304\\u3002\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"secondary\",\n          onClick: onHide,\n          children: \"\\u95DC\\u9589\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }, this)\n  );\n}\n_s(CharacterEvalModal, \"NtW4LQF+OeOYj/hcz3mQViSoQuQ=\");\n_c = CharacterEvalModal;\nexport default CharacterEvalModal;\nvar _c;\n$RefreshReg$(_c, \"CharacterEvalModal\");","map":{"version":3,"names":["React","useState","useEffect","Modal","Button","Alert","ListGroup","Badge","Collapse","Form","InputGroup","FeedbackChart","jsxDEV","_jsxDEV","Fragment","_Fragment","FEEDBACK_STORAGE_KEY","CharacterEvalModal","show","onHide","character","_s","originalCharacterFeedback","setOriginalCharacterFeedback","filteredCharacterFeedback","setFilteredCharacterFeedback","goalSearchModal","setGoalSearchModal","showFilters","setShowFilters","savedFeedback","localStorage","getItem","allFeedback","JSON","parse","Array","isArray","e","console","error","filtered","filter","fb","characterId","id","timestamp","sort","a","b","result","trim","lowerCaseGoal","toLowerCase","_fb$goal","goal","includes","recentEvalFeedback","slice","reverse","chartLabels","map","Date","toLocaleDateString","month","day","getScore","score","undefined","chartDataSets","label","data","_fb$scores","scores","clarity","backgroundColor","_fb$scores2","empathy","_fb$scores3","confidence","_fb$scores4","appropriateness","_fb$scores5","goalAchievement","ds","borderColor","replace","borderWidth","centered","size","dialogClassName","children","Header","closeButton","Title","name","fileName","_jsxFileName","lineNumber","columnNumber","Body","className","variant","onClick","in","Text","Control","type","placeholder","value","onChange","target","length","labels","datasets","Item","toLocaleString","dateStyle","timeStyle","bg","text","style","whiteSpace","fontSize","summary","Object","values","some","s","pill","Footer","_c","$RefreshReg$"],"sources":["C:/Users/Paul2/Downloads/front-end-main (5)/front-end-main/src/components/CharacterHall/CharacterEvalModal.js"],"sourcesContent":["// src/components/CharacterHall/CharacterEvalModal.js (添加固定搜尋/篩選和收起功能)\r\n\r\nimport React, { useState, useEffect } from 'react';\r\n// --- 導入 Collapse, Form, InputGroup ---\r\nimport { Modal, Button, Alert, ListGroup, Badge, Collapse, Form, InputGroup } from 'react-bootstrap';\r\nimport FeedbackChart from '../FeedbackWall/FeedbackChart';\r\nimport './CharacterHall.css'; // 確保導入了 CSS\r\n\r\nconst FEEDBACK_STORAGE_KEY = 'wingchat_feedback';\r\n\r\nfunction CharacterEvalModal({ show, onHide, character }) {\r\n  const [originalCharacterFeedback, setOriginalCharacterFeedback] = useState([]);\r\n  const [filteredCharacterFeedback, setFilteredCharacterFeedback] = useState([]);\r\n  const [goalSearchModal, setGoalSearchModal] = useState('');\r\n  const [showFilters, setShowFilters] = useState(true); // <<<--- 新增狀態控制篩選區域顯示\r\n\r\n  useEffect(() => { /* ... (加載數據邏輯保持不變) ... */ if (show && character) { const savedFeedback = localStorage.getItem(FEEDBACK_STORAGE_KEY); let allFeedback = []; if (savedFeedback) { try { allFeedback = JSON.parse(savedFeedback); if (!Array.isArray(allFeedback)) allFeedback = []; } catch (e) { console.error(\"Parsing feedback failed\", e); } } const filtered = allFeedback .filter(fb => fb.characterId === character.id && typeof fb.timestamp === 'number') .sort((a, b) => b.timestamp - a.timestamp); setOriginalCharacterFeedback(filtered); setFilteredCharacterFeedback(filtered); setGoalSearchModal(''); setShowFilters(true); /* 每次打開默認展開 */ } else { setOriginalCharacterFeedback([]); setFilteredCharacterFeedback([]); setGoalSearchModal(''); } }, [show, character]);\r\n  useEffect(() => { /* ... (篩選邏輯保持不變) ... */ if (!show) return; let result = [...originalCharacterFeedback]; if (goalSearchModal.trim()) { const lowerCaseGoal = goalSearchModal.trim().toLowerCase(); result = result.filter(fb => fb.goal?.toLowerCase().includes(lowerCaseGoal) ); } setFilteredCharacterFeedback(result); }, [originalCharacterFeedback, goalSearchModal, show]);\r\n  const recentEvalFeedback = filteredCharacterFeedback.slice(0, 5).reverse();\r\n  const chartLabels = recentEvalFeedback.map((fb) => new Date(fb.timestamp).toLocaleDateString('zh-TW', { month: 'numeric', day: 'numeric' }));\r\n  const getScore = (score) => (score === null || score === undefined ? 0 : score);\r\n  const chartDataSets = [ /* ... (保持不變) ... */ { label: '清晰度', data: recentEvalFeedback.map(fb => getScore(fb.scores?.clarity)), backgroundColor: 'rgba(54, 162, 235, 0.6)' }, { label: '同理心', data: recentEvalFeedback.map(fb => getScore(fb.scores?.empathy)), backgroundColor: 'rgba(255, 206, 86, 0.6)' }, { label: '自信', data: recentEvalFeedback.map(fb => getScore(fb.scores?.confidence)), backgroundColor: 'rgba(75, 192, 192, 0.6)' }, { label: '適當性', data: recentEvalFeedback.map(fb => getScore(fb.scores?.appropriateness)), backgroundColor: 'rgba(153, 102, 255, 0.6)' }, { label: '目標達成', data: recentEvalFeedback.map(fb => getScore(fb.scores?.goalAchievement)), backgroundColor: 'rgba(255, 99, 132, 0.6)' }, ].map(ds => ({ ...ds, borderColor: ds.backgroundColor.replace('0.6', '1'), borderWidth: 1 }));\r\n\r\n\r\n  return (\r\n    // --- 修改 Modal 結構以支持 Flexbox 佈局 ---\r\n    <Modal show={show} onHide={onHide} centered size=\"lg\" dialogClassName=\"character-eval-modal-dialog\"> {/* 添加自訂 class */}\r\n      <Modal.Header closeButton>\r\n        <Modal.Title>與 \"{character?.name}\" 的對話評估</Modal.Title>\r\n      </Modal.Header>\r\n\r\n      {/* --- 將 Body 設為 Flex Column --- */}\r\n      <Modal.Body className=\"d-flex flex-column p-0 character-eval-modal-body\"> {/* 移除 padding, 添加 class */}\r\n\r\n        {/* --- 固定的篩選區域 --- */}\r\n        {/* 添加一個容器並控制其顯示 */}\r\n        <div className=\"character-eval-filters bg-light p-3 border-bottom\">\r\n           <div className=\"d-flex justify-content-between align-items-center mb-2\">\r\n             <h6 className=\"mb-0 text-muted small\">搜尋與篩選</h6>\r\n             <Button\r\n               variant=\"link\"\r\n               size=\"sm\"\r\n               onClick={() => setShowFilters(!showFilters)}\r\n               aria-controls=\"collapse-filters\"\r\n               aria-expanded={showFilters}\r\n               className=\"p-0 text-secondary\"\r\n             >\r\n               {showFilters ? '收起' : '展開'} <i className={`bi bi-chevron-${showFilters ? 'up' : 'down'}`}></i>\r\n             </Button>\r\n           </div>\r\n           {/* 使用 Collapse 元件實現展開/收起動畫 */}\r\n           <Collapse in={showFilters}>\r\n             <div id=\"collapse-filters\">\r\n               <InputGroup size=\"sm\">\r\n                 <InputGroup.Text><i className=\"bi bi-search\"></i></InputGroup.Text>\r\n                 <Form.Control\r\n                   type=\"text\"\r\n                   placeholder=\"搜尋此角色的對話目標...\"\r\n                   value={goalSearchModal}\r\n                   onChange={(e) => setGoalSearchModal(e.target.value)}\r\n                 />\r\n               </InputGroup>\r\n               {/* TODO: 在這裡添加其他篩選器，例如分數範圍 */}\r\n               {goalSearchModal && ( // 只有在有搜尋條件時才顯示清除按鈕\r\n                 <Button variant=\"outline-secondary\" size=\"sm\" onClick={() => setGoalSearchModal('')} className=\"mt-2 w-100\">\r\n                   清除目標搜尋\r\n                 </Button>\r\n               )}\r\n             </div>\r\n           </Collapse>\r\n        </div>\r\n        {/* --- 結束固定的篩選區域 --- */}\r\n\r\n\r\n        {/* --- 可滾動的內容區域 --- */}\r\n        <div className=\"character-eval-content flex-grow-1 overflow-auto p-3\"> {/* 添加 class, flex-grow, overflow, padding */}\r\n          {originalCharacterFeedback.length > 0 ? (\r\n            filteredCharacterFeedback.length > 0 ? (\r\n             <>\r\n              {/* 圖表區域 */}\r\n              {recentEvalFeedback.length > 0 && (\r\n                <div className=\"mb-4\">\r\n                  <h5 className=\"text-center mb-3\">最近 {recentEvalFeedback.length} 次表現趨勢</h5>\r\n                  <FeedbackChart labels={chartLabels} datasets={chartDataSets} />\r\n                </div>\r\n              )}\r\n              {recentEvalFeedback.length > 0 && <hr />}\r\n              {/* 歷史記錄列表 */}\r\n              <h5 className=\"mb-3\">詳細回饋記錄 ({filteredCharacterFeedback.length} 筆)</h5>\r\n              <ListGroup variant=\"flush\">\r\n                {[...filteredCharacterFeedback].map(fb => ( // 改回降序顯示\r\n                  <ListGroup.Item key={fb.timestamp} className=\"px-0\">\r\n                    {/* ... (列表項內容保持不變) ... */}\r\n                     <div className=\"d-flex justify-content-between align-items-center mb-2\"> <small className=\"text-muted\"> {new Date(fb.timestamp).toLocaleString('zh-TW', { dateStyle: 'short', timeStyle: 'short' })} </small> <Badge bg=\"light\" text=\"dark\">目標: {fb.goal || '未指定'}</Badge> </div> <h6>AI 總結:</h6> <p style={{ whiteSpace: 'pre-wrap', fontSize: '0.95em' }}>{fb.summary || '-'}</p> {fb.scores && Object.values(fb.scores).some(s => s !== null) && ( <> <p className=\"small mb-1\">評分:</p> <ul className=\"list-inline small mb-0\"> <li className=\"list-inline-item me-2\">清: <Badge pill bg={getScore(fb.scores.clarity) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.clarity)}</Badge></li> <li className=\"list-inline-item me-2\">同: <Badge pill bg={getScore(fb.scores.empathy) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.empathy)}</Badge></li> <li className=\"list-inline-item me-2\">自: <Badge pill bg={getScore(fb.scores.confidence) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.confidence)}</Badge></li> <li className=\"list-inline-item me-2\">適: <Badge pill bg={getScore(fb.scores.appropriateness) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.appropriateness)}</Badge></li> <li className=\"list-inline-item\">達: <Badge pill bg={getScore(fb.scores.goalAchievement) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.goalAchievement)}</Badge></li> </ul> </> )}\r\n                  </ListGroup.Item>\r\n                ))}\r\n              </ListGroup>\r\n             </>\r\n            ) : ( <Alert variant=\"warning\">找不到符合目標關鍵字 \"{goalSearchModal}\" 的記錄。</Alert> )\r\n          ) : ( <Alert variant=\"info\">還沒有與此角色的對話評估記錄。</Alert> )}\r\n        </div>\r\n        {/* --- 結束可滾動的內容區域 --- */}\r\n\r\n      </Modal.Body>\r\n      <Modal.Footer>\r\n        <Button variant=\"secondary\" onClick={onHide}>\r\n          關閉\r\n        </Button>\r\n      </Modal.Footer>\r\n    </Modal>\r\n  );\r\n}\r\n\r\nexport default CharacterEvalModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}