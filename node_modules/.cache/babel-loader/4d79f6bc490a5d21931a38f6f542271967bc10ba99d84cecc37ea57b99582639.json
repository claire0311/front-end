{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Paul2\\\\Downloads\\\\front-end-main (5)\\\\front-end-main\\\\src\\\\components\\\\CharacterHall\\\\CharacterHall.js\",\n  _s = $RefreshSig$();\n// src/components/CharacterHall/CharacterHall.js (處理新增邏輯，不處理提示)\n\nimport React, { useState } from 'react';\nimport { Button, Row, Col, Card, Alert as BootstrapAlert } from 'react-bootstrap';\nimport AddCharacterModal from './AddCharacterModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction CharacterHall({\n  characters,\n  onUpdateCharacters,\n  onSelectCharacter\n}) {\n  _s();\n  const [showModal, setShowModal] = useState(false);\n  // 不再需要 addError 狀態\n\n  /**\n   * 處理新增角色請求，檢查重複性。\n   * @param {object} newCharacter - 包含 name 和 description 的新角色對象。\n   * @returns {boolean} - 返回 true 表示新增成功(名稱不重複)，false 表示失敗(名稱重複)。\n   */\n  const handleAddCharacterRequest = newCharacter => {\n    const trimmedNewName = newCharacter.name.trim();\n    const isDuplicate = characters.some(character => character.name.trim().toLowerCase() === trimmedNewName.toLowerCase());\n    if (isDuplicate) {\n      console.log(\"名稱重複，阻止新增\"); // 可以保留日誌\n      return false; // 返回 false 表示名稱重複\n    }\n\n    // 名稱不重複，執行新增\n    const characterWithId = {\n      ...newCharacter,\n      name: trimmedNewName,\n      id: `char_${Date.now()}_${Math.random().toString(36).substring(2, 7)}`\n    }; // 保存 trim 後的名稱\n    const updatedCharacters = [...characters, characterWithId];\n    onUpdateCharacters(updatedCharacters);\n    console.log(\"角色新增成功\");\n    return true; // 返回 true 表示成功\n  };\n  const handleDeleteCharacter = idToDelete => {\n    /* ... (保持不變) ... */if (idToDelete === 'default') {\n      alert(\"無法刪除預設助手角色。\");\n      return;\n    }\n    const characterToDelete = characters.find(c => c.id === idToDelete);\n    if (characterToDelete && window.confirm(`確定要刪除角色 \"${characterToDelete.name}\" 嗎？`)) {\n      const updatedCharacters = characters.filter(c => c.id !== idToDelete);\n      onUpdateCharacters(updatedCharacters);\n    }\n  };\n  const handleHideModal = () => {\n    setShowModal(false);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mb-3\",\n      children: \"\\u89D2\\u8272\\u9928\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-muted mb-4\",\n      children: \"\\u5728\\u9019\\u88E1\\u65B0\\u589E\\u3001\\u7BA1\\u7406\\u4F60\\u60F3\\u4E92\\u52D5\\u7DF4\\u7FD2\\u7684 AI \\u89D2\\u8272\\u3002\\u9078\\u64C7\\u4E00\\u500B\\u89D2\\u8272\\u5F8C\\uFF0C\\u9EDE\\u64CA\\u300C\\u958B\\u59CB\\u8A13\\u7DF4\\u300D\\u5373\\u53EF\\u9032\\u5165\\u8A13\\u7DF4\\u5BA4\\u3002\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"primary\",\n      onClick: () => setShowModal(true),\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"bi bi-plus-lg me-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), \"\\u65B0\\u589E\\u89D2\\u8272\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this), characters.filter(c => c.id !== 'default').length === 0 && /*#__PURE__*/_jsxDEV(BootstrapAlert, {\n      variant: \"info\",\n      children: \"\\u76EE\\u524D\\u6C92\\u6709\\u4EFB\\u4F55\\u81EA\\u8A02\\u89D2\\u8272\\uFF0C\\u5FEB\\u65B0\\u589E\\u4E00\\u500B\\u5427\\uFF01\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      xs: 1,\n      md: 2,\n      lg: 3,\n      xl: 4,\n      className: \"g-4\",\n      children: characters.map(character => /*#__PURE__*/_jsxDEV(Col, {}, character.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AddCharacterModal, {\n      show: showModal,\n      onHide: handleHideModal\n      // 將 handleAddCharacterRequest 傳遞給 Modal\n      ,\n      onAddCharacterRequest: handleAddCharacterRequest\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 5\n  }, this);\n}\n_s(CharacterHall, \"uVlnG5KLfXemZk5i5Fl+Cg356FU=\");\n_c = CharacterHall;\nexport default CharacterHall;\nvar _c;\n$RefreshReg$(_c, \"CharacterHall\");","map":{"version":3,"names":["React","useState","Button","Row","Col","Card","Alert","BootstrapAlert","AddCharacterModal","jsxDEV","_jsxDEV","CharacterHall","characters","onUpdateCharacters","onSelectCharacter","_s","showModal","setShowModal","handleAddCharacterRequest","newCharacter","trimmedNewName","name","trim","isDuplicate","some","character","toLowerCase","console","log","characterWithId","id","Date","now","Math","random","toString","substring","updatedCharacters","handleDeleteCharacter","idToDelete","alert","characterToDelete","find","c","window","confirm","filter","handleHideModal","children","className","fileName","_jsxFileName","lineNumber","columnNumber","variant","onClick","length","xs","md","lg","xl","map","show","onHide","onAddCharacterRequest","_c","$RefreshReg$"],"sources":["C:/Users/Paul2/Downloads/front-end-main (5)/front-end-main/src/components/CharacterHall/CharacterHall.js"],"sourcesContent":["// src/components/CharacterHall/CharacterHall.js (處理新增邏輯，不處理提示)\n\nimport React, { useState } from 'react';\nimport { Button, Row, Col, Card, Alert as BootstrapAlert } from 'react-bootstrap';\nimport AddCharacterModal from './AddCharacterModal';\n\nfunction CharacterHall({ characters, onUpdateCharacters, onSelectCharacter }) {\n  const [showModal, setShowModal] = useState(false);\n  // 不再需要 addError 狀態\n\n  /**\n   * 處理新增角色請求，檢查重複性。\n   * @param {object} newCharacter - 包含 name 和 description 的新角色對象。\n   * @returns {boolean} - 返回 true 表示新增成功(名稱不重複)，false 表示失敗(名稱重複)。\n   */\n  const handleAddCharacterRequest = (newCharacter) => {\n    const trimmedNewName = newCharacter.name.trim();\n    const isDuplicate = characters.some(\n      (character) => character.name.trim().toLowerCase() === trimmedNewName.toLowerCase()\n    );\n\n    if (isDuplicate) {\n      console.log(\"名稱重複，阻止新增\"); // 可以保留日誌\n      return false; // 返回 false 表示名稱重複\n    }\n\n    // 名稱不重複，執行新增\n    const characterWithId = { ...newCharacter, name: trimmedNewName, id: `char_${Date.now()}_${Math.random().toString(36).substring(2, 7)}` }; // 保存 trim 後的名稱\n    const updatedCharacters = [...characters, characterWithId];\n    onUpdateCharacters(updatedCharacters);\n    console.log(\"角色新增成功\");\n    return true; // 返回 true 表示成功\n  };\n\n  const handleDeleteCharacter = (idToDelete) => { /* ... (保持不變) ... */ if (idToDelete === 'default') { alert(\"無法刪除預設助手角色。\"); return; } const characterToDelete = characters.find(c => c.id === idToDelete); if (characterToDelete && window.confirm(`確定要刪除角色 \"${characterToDelete.name}\" 嗎？`)) { const updatedCharacters = characters.filter(c => c.id !== idToDelete); onUpdateCharacters(updatedCharacters); } };\n\n  const handleHideModal = () => {\n      setShowModal(false);\n  }\n\n  return (\n    <div>\n      <h2 className=\"mb-3\">角色館</h2>\n      <p className=\"text-muted mb-4\">在這裡新增、管理你想互動練習的 AI 角色。選擇一個角色後，點擊「開始訓練」即可進入訓練室。</p>\n      <Button variant=\"primary\" onClick={() => setShowModal(true)} className=\"mb-4\">\n        <i className=\"bi bi-plus-lg me-2\"></i>新增角色\n      </Button>\n\n      {/* 無角色提示 */}\n      {characters.filter(c => c.id !== 'default').length === 0 && (\n        <BootstrapAlert variant=\"info\">目前沒有任何自訂角色，快新增一個吧！</BootstrapAlert>\n      )}\n\n      <Row xs={1} md={2} lg={3} xl={4} className=\"g-4\">\n        {/* ... (map 渲染角色卡片保持不變) ... */}\n        {characters.map((character) => (\n          <Col key={character.id}>\n             {/* ... Card ... */}\n          </Col>\n        ))}\n      </Row>\n\n      <AddCharacterModal\n        show={showModal}\n        onHide={handleHideModal}\n        // 將 handleAddCharacterRequest 傳遞給 Modal\n        onAddCharacterRequest={handleAddCharacterRequest}\n      />\n\n      {/* 移除 style jsx global */}\n    </div>\n  );\n}\n\nexport default CharacterHall;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}