{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Paul2\\\\Downloads\\\\front-end-main (5)\\\\front-end-main\\\\src\\\\components\\\\FeedbackWall\\\\FeedbackWall.js\",\n  _s = $RefreshSig$();\n// src/components/FeedbackWall/FeedbackWall.js (添加篩選區域收起/展開)\n\nimport React, { useState, useEffect, useMemo } from 'react';\n// --- 導入 Collapse ---\nimport { Container, Row, Col, Card, Alert, Badge, InputGroup, Form, Button, Collapse } from 'react-bootstrap';\nimport FeedbackChart from './FeedbackChart';\nimport './FeedbackWall.css'; // 確保導入 CSS\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst FEEDBACK_STORAGE_KEY = 'wingchat_feedback';\nfunction FeedbackWall() {\n  _s();\n  const [originalFeedbackHistory, setOriginalFeedbackHistory] = useState([]);\n  const [filteredFeedbackHistory, setFilteredFeedbackHistory] = useState([]);\n  const [characterSearch, setCharacterSearch] = useState('');\n  const [goalSearch, setGoalSearch] = useState('');\n  const [showFilters, setShowFilters] = useState(true); // <<<--- 新增狀態控制篩選顯示\n\n  useEffect(() => {\n    /* ... (加載原始數據邏輯不變) ... */const savedFeedback = localStorage.getItem(FEEDBACK_STORAGE_KEY);\n    let parsedFeedback = [];\n    if (savedFeedback) {\n      try {\n        parsedFeedback = JSON.parse(savedFeedback);\n        if (!Array.isArray(parsedFeedback)) parsedFeedback = [];\n        parsedFeedback = parsedFeedback.filter(fb => typeof fb.timestamp === 'number').sort((a, b) => b.timestamp - a.timestamp);\n      } catch (e) {\n        console.error(\"Failed to parse feedback history\", e);\n      }\n    }\n    setOriginalFeedbackHistory(parsedFeedback);\n  }, []);\n  useEffect(() => {\n    /* ... (篩選邏輯不變) ... */let result = [...originalFeedbackHistory];\n    if (characterSearch.trim()) {\n      const lowerCaseSearch = characterSearch.trim().toLowerCase();\n      result = result.filter(fb => {\n        var _fb$characterName;\n        return (_fb$characterName = fb.characterName) === null || _fb$characterName === void 0 ? void 0 : _fb$characterName.toLowerCase().includes(lowerCaseSearch);\n      });\n    }\n    if (goalSearch.trim()) {\n      const lowerCaseGoal = goalSearch.trim().toLowerCase();\n      result = result.filter(fb => {\n        var _fb$goal;\n        return (_fb$goal = fb.goal) === null || _fb$goal === void 0 ? void 0 : _fb$goal.toLowerCase().includes(lowerCaseGoal);\n      });\n    }\n    setFilteredFeedbackHistory(result);\n  }, [originalFeedbackHistory, characterSearch, goalSearch]);\n  const clearFilters = () => {\n    /* ... (清除篩選邏輯不變) ... */setCharacterSearch('');\n    setGoalSearch('');\n  };\n  const recentFilteredFeedback = filteredFeedbackHistory.slice(0, 5).reverse();\n  const chartLabels = recentFilteredFeedback.map((fb, index, arr) => {\n    /* ... (日期處理邏輯不變) ... */const date = new Date(fb.timestamp);\n    const dateString = date.toLocaleDateString('zh-TW', {\n      month: 'numeric',\n      day: 'numeric'\n    });\n    const timeString = date.toLocaleTimeString('zh-TW', {\n      hour: '2-digit',\n      minute: '2-digit',\n      hour12: false\n    });\n    const prevDateString = index > 0 ? new Date(arr[index - 1].timestamp).toLocaleDateString('zh-TW', {\n      month: 'numeric',\n      day: 'numeric'\n    }) : null;\n    return dateString === prevDateString ? `${dateString} ${timeString}` : dateString;\n  });\n  const getScore = score => score === null || score === undefined ? 0 : score;\n  const chartDataSets = [/* ... (保持不變) ... */{\n    label: '清晰度',\n    data: recentFilteredFeedback.map(fb => {\n      var _fb$scores;\n      return getScore((_fb$scores = fb.scores) === null || _fb$scores === void 0 ? void 0 : _fb$scores.clarity);\n    }),\n    backgroundColor: 'rgba(54, 162, 235, 0.6)',\n    borderColor: 'rgba(54, 162, 235, 1)',\n    borderWidth: 1\n  }, {\n    label: '同理心',\n    data: recentFilteredFeedback.map(fb => {\n      var _fb$scores2;\n      return getScore((_fb$scores2 = fb.scores) === null || _fb$scores2 === void 0 ? void 0 : _fb$scores2.empathy);\n    }),\n    backgroundColor: 'rgba(255, 206, 86, 0.6)',\n    borderColor: 'rgba(255, 206, 86, 1)',\n    borderWidth: 1\n  }, {\n    label: '自信',\n    data: recentFilteredFeedback.map(fb => {\n      var _fb$scores3;\n      return getScore((_fb$scores3 = fb.scores) === null || _fb$scores3 === void 0 ? void 0 : _fb$scores3.confidence);\n    }),\n    backgroundColor: 'rgba(75, 192, 192, 0.6)',\n    borderColor: 'rgba(75, 192, 192, 1)',\n    borderWidth: 1\n  }, {\n    label: '適當性',\n    data: recentFilteredFeedback.map(fb => {\n      var _fb$scores4;\n      return getScore((_fb$scores4 = fb.scores) === null || _fb$scores4 === void 0 ? void 0 : _fb$scores4.appropriateness);\n    }),\n    backgroundColor: 'rgba(153, 102, 255, 0.6)',\n    borderColor: 'rgba(153, 102, 255, 1)',\n    borderWidth: 1\n  }, {\n    label: '目標達成',\n    data: recentFilteredFeedback.map(fb => {\n      var _fb$scores5;\n      return getScore((_fb$scores5 = fb.scores) === null || _fb$scores5 === void 0 ? void 0 : _fb$scores5.goalAchievement);\n    }),\n    backgroundColor: 'rgba(255, 99, 132, 0.6)',\n    borderColor: 'rgba(255, 99, 132, 1)',\n    borderWidth: 1\n  }];\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: true,\n    className: \"feedback-wall-container p-0 d-flex flex-column\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"feedback-wall-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"mb-2\",\n        children: \"\\u56DE\\u994B\\u7246\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-muted mb-3\",\n        children: \"\\u9019\\u88E1\\u5F59\\u7E3D\\u4E86\\u4F60\\u6BCF\\u6B21\\u8ACB\\u6C42 AI \\u56DE\\u994B\\u7684\\u7D50\\u679C\\uFF0C\\u89C0\\u5BDF\\u4F60\\u7684\\u9032\\u6B65\\u8DA8\\u52E2\\u5427\\uFF01\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(InputGroup, {\n        size: \"sm\",\n        children: [/*#__PURE__*/_jsxDEV(InputGroup.Text, {\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 39,\n            columnNumber: 28\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n          type: \"text\",\n          placeholder: \"\\u641C\\u5C0B\\u89D2\\u8272\\u540D\\u7A31...\",\n          value: characterSearch,\n          onChange: e => setCharacterSearch(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"feedback-filters-container\",\n      children: [\" \", /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"d-flex justify-content-between align-items-center mb-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n          className: \"mb-0 text-muted small\",\n          children: \"\\u5C0D\\u8A71\\u76EE\\u6A19\\u7BE9\\u9078\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"link\",\n          size: \"sm\",\n          onClick: () => setShowFilters(!showFilters),\n          \"aria-controls\": \"collapse-feedback-filters\",\n          \"aria-expanded\": showFilters,\n          className: \"p-0 text-secondary\",\n          children: [showFilters ? '收起' : '展開', \" \", /*#__PURE__*/_jsxDEV(\"i\", {\n            className: `bi bi-chevron-${showFilters ? 'up' : 'down'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 41\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n        in: showFilters,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"collapse-feedback-filters\",\n          children: /*#__PURE__*/_jsxDEV(InputGroup, {\n            size: \"sm\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Control, {\n              type: \"text\",\n              placeholder: \"\\u641C\\u5C0B\\u5C0D\\u8A71\\u76EE\\u6A19\\u95DC\\u9375\\u5B57...\",\n              value: goalSearch,\n              onChange: e => setGoalSearch(e.target.value),\n              className: \"me-2\" // 給右邊按鈕留空隙\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 68,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"outline-secondary\",\n              size: \"sm\",\n              onClick: clearFilters,\n              title: \"\\u6E05\\u9664\\u6240\\u6709\\u7BE9\\u9078\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"bi bi-x-lg\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 76,\n                columnNumber: 17\n              }, this), \" \\u6E05\\u9664\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"feedback-wall-body\",\n      children: [/*#__PURE__*/_jsxDEV(Card, {\n        className: \"mb-4 shadow-sm\",\n        children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n          children: [\"\\u6700\\u8FD1 \", recentFilteredFeedback.length, \" \\u6B21\\u7B26\\u5408\\u7BE9\\u9078\\u7684\\u7DF4\\u7FD2\\u8868\\u73FE\\u8DA8\\u52E2\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: filteredFeedbackHistory.length > 0 ? recentFilteredFeedback.length > 0 ? /*#__PURE__*/_jsxDEV(FeedbackChart, {\n            labels: chartLabels,\n            datasets: chartDataSets\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 16\n          }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"light\",\n            className: \"text-center\",\n            children: \"\\u6C92\\u6709\\u6700\\u8FD1\\u7684\\u56DE\\u994B\\u6578\\u64DA\\u53EF\\u4F9B\\u7E6A\\u88FD\\u8DA8\\u52E2\\u5716\\u3002\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 19\n          }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n            variant: \"light\",\n            className: \"text-center\",\n            children: characterSearch || goalSearch ? '找不到符合篩選條件的回饋記錄。' : '還沒有任何回饋記錄。'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"h5 mb-3\",\n        children: [\"\\u8A73\\u7D30\\u56DE\\u994B\\u8A18\\u9304 (\", filteredFeedbackHistory.length, \" \\u7B46)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 7\n      }, this), filteredFeedbackHistory.length > 0 ? filteredFeedbackHistory.map(fb => /*#__PURE__*/_jsxDEV(Card, {\n        className: \"shadow-sm\",\n        children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n          className: \"d-flex justify-content-between align-items-center small text-muted flex-wrap\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: new Date(fb.timestamp).toLocaleString('zh-TW', {\n              dateStyle: 'short',\n              timeStyle: 'short'\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 107,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mt-1 mt-md-0\",\n            children: [\" \", /*#__PURE__*/_jsxDEV(Badge, {\n              bg: \"secondary\",\n              className: \"me-2\",\n              children: [\"\\u89D2\\u8272: \", fb.characterName || '未知']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 46\n            }, this), \" \", /*#__PURE__*/_jsxDEV(Badge, {\n              bg: \"info\",\n              text: \"dark\",\n              children: [\"\\u76EE\\u6A19: \", fb.goal || '未知']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 124\n            }, this), \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n          children: [/*#__PURE__*/_jsxDEV(Card.Subtitle, {\n            className: \"mb-2 text-muted\",\n            children: \"AI \\u7E3D\\u7D50:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              whiteSpace: 'pre-wrap'\n            },\n            children: fb.summary || '-'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 15\n          }, this), fb.scores && Object.values(fb.scores).some(s => s !== null) && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [\" \", /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 84\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"small mb-1\",\n              children: \"\\u8A55\\u5206\\u7D30\\u7BC0:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 91\n            }, this), \" \", /*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"list-inline small\",\n              children: [\" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"list-inline-item me-3\",\n                children: [\"\\u6E05: \", /*#__PURE__*/_jsxDEV(Badge, {\n                  pill: true,\n                  bg: getScore(fb.scores.clarity) >= 60 ? \"success\" : \"warning\",\n                  children: getScore(fb.scores.clarity)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 203\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 162\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"list-inline-item me-3\",\n                children: [\"\\u540C: \", /*#__PURE__*/_jsxDEV(Badge, {\n                  pill: true,\n                  bg: getScore(fb.scores.empathy) >= 60 ? \"success\" : \"warning\",\n                  children: getScore(fb.scores.empathy)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 362\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 321\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"list-inline-item me-3\",\n                children: [\"\\u81EA: \", /*#__PURE__*/_jsxDEV(Badge, {\n                  pill: true,\n                  bg: getScore(fb.scores.confidence) >= 60 ? \"success\" : \"warning\",\n                  children: getScore(fb.scores.confidence)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 521\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 480\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"list-inline-item me-3\",\n                children: [\"\\u9069: \", /*#__PURE__*/_jsxDEV(Badge, {\n                  pill: true,\n                  bg: getScore(fb.scores.appropriateness) >= 60 ? \"success\" : \"warning\",\n                  children: getScore(fb.scores.appropriateness)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 686\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 645\n              }, this), \" \", /*#__PURE__*/_jsxDEV(\"li\", {\n                className: \"list-inline-item\",\n                children: [\"\\u9054: \", /*#__PURE__*/_jsxDEV(Badge, {\n                  pill: true,\n                  bg: getScore(fb.scores.goalAchievement) >= 60 ? \"success\" : \"warning\",\n                  children: getScore(fb.scores.goalAchievement)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 856\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 820\n              }, this), \" \"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 127\n            }, this), \" \"]\n          }, void 0, true)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 13\n        }, this)]\n      }, fb.timestamp, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 11\n      }, this)) : /*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"secondary\",\n        className: \"text-center\",\n        children: characterSearch || goalSearch ? '找不到符合篩選條件的回饋記錄。' : '還沒有任何回饋記錄。'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 5\n  }, this);\n}\n_s(FeedbackWall, \"tU4k4GLijXbxJh7aaWQy5FXNIBI=\");\n_c = FeedbackWall;\nexport default FeedbackWall;\nvar _c;\n$RefreshReg$(_c, \"FeedbackWall\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","Container","Row","Col","Card","Alert","Badge","InputGroup","Form","Button","Collapse","FeedbackChart","jsxDEV","_jsxDEV","Fragment","_Fragment","FEEDBACK_STORAGE_KEY","FeedbackWall","_s","originalFeedbackHistory","setOriginalFeedbackHistory","filteredFeedbackHistory","setFilteredFeedbackHistory","characterSearch","setCharacterSearch","goalSearch","setGoalSearch","showFilters","setShowFilters","savedFeedback","localStorage","getItem","parsedFeedback","JSON","parse","Array","isArray","filter","fb","timestamp","sort","a","b","e","console","error","result","trim","lowerCaseSearch","toLowerCase","_fb$characterName","characterName","includes","lowerCaseGoal","_fb$goal","goal","clearFilters","recentFilteredFeedback","slice","reverse","chartLabels","map","index","arr","date","Date","dateString","toLocaleDateString","month","day","timeString","toLocaleTimeString","hour","minute","hour12","prevDateString","getScore","score","undefined","chartDataSets","label","data","_fb$scores","scores","clarity","backgroundColor","borderColor","borderWidth","_fb$scores2","empathy","_fb$scores3","confidence","_fb$scores4","appropriateness","_fb$scores5","goalAchievement","fluid","className","children","fileName","_jsxFileName","lineNumber","columnNumber","size","Text","Control","type","placeholder","value","onChange","target","variant","onClick","in","id","title","Header","length","Body","labels","datasets","toLocaleString","dateStyle","timeStyle","bg","text","Subtitle","style","whiteSpace","summary","Object","values","some","s","pill","_c","$RefreshReg$"],"sources":["C:/Users/Paul2/Downloads/front-end-main (5)/front-end-main/src/components/FeedbackWall/FeedbackWall.js"],"sourcesContent":["// src/components/FeedbackWall/FeedbackWall.js (添加篩選區域收起/展開)\n\nimport React, { useState, useEffect, useMemo } from 'react';\n// --- 導入 Collapse ---\nimport { Container, Row, Col, Card, Alert, Badge, InputGroup, Form, Button, Collapse } from 'react-bootstrap';\nimport FeedbackChart from './FeedbackChart';\nimport './FeedbackWall.css'; // 確保導入 CSS\n\nconst FEEDBACK_STORAGE_KEY = 'wingchat_feedback';\n\nfunction FeedbackWall() {\n  const [originalFeedbackHistory, setOriginalFeedbackHistory] = useState([]);\n  const [filteredFeedbackHistory, setFilteredFeedbackHistory] = useState([]);\n  const [characterSearch, setCharacterSearch] = useState('');\n  const [goalSearch, setGoalSearch] = useState('');\n  const [showFilters, setShowFilters] = useState(true); // <<<--- 新增狀態控制篩選顯示\n\n  useEffect(() => { /* ... (加載原始數據邏輯不變) ... */ const savedFeedback = localStorage.getItem(FEEDBACK_STORAGE_KEY); let parsedFeedback = []; if (savedFeedback) { try { parsedFeedback = JSON.parse(savedFeedback); if (!Array.isArray(parsedFeedback)) parsedFeedback = []; parsedFeedback = parsedFeedback .filter(fb => typeof fb.timestamp === 'number') .sort((a, b) => b.timestamp - a.timestamp); } catch (e) { console.error(\"Failed to parse feedback history\", e); } } setOriginalFeedbackHistory(parsedFeedback); }, []);\n\n  useEffect(() => { /* ... (篩選邏輯不變) ... */ let result = [...originalFeedbackHistory]; if (characterSearch.trim()) { const lowerCaseSearch = characterSearch.trim().toLowerCase(); result = result.filter(fb => fb.characterName?.toLowerCase().includes(lowerCaseSearch) ); } if (goalSearch.trim()) { const lowerCaseGoal = goalSearch.trim().toLowerCase(); result = result.filter(fb => fb.goal?.toLowerCase().includes(lowerCaseGoal) ); } setFilteredFeedbackHistory(result); }, [originalFeedbackHistory, characterSearch, goalSearch]);\n\n  const clearFilters = () => { /* ... (清除篩選邏輯不變) ... */ setCharacterSearch(''); setGoalSearch(''); };\n\n  const recentFilteredFeedback = filteredFeedbackHistory.slice(0, 5).reverse();\n  const chartLabels = recentFilteredFeedback.map((fb, index, arr) => { /* ... (日期處理邏輯不變) ... */ const date = new Date(fb.timestamp); const dateString = date.toLocaleDateString('zh-TW', { month: 'numeric', day: 'numeric' }); const timeString = date.toLocaleTimeString('zh-TW', { hour: '2-digit', minute: '2-digit', hour12: false }); const prevDateString = index > 0 ? new Date(arr[index - 1].timestamp).toLocaleDateString('zh-TW', { month: 'numeric', day: 'numeric' }) : null; return dateString === prevDateString ? `${dateString} ${timeString}` : dateString; });\n  const getScore = (score) => (score === null || score === undefined ? 0 : score);\n  const chartDataSets = [ /* ... (保持不變) ... */ { label: '清晰度', data: recentFilteredFeedback.map(fb => getScore(fb.scores?.clarity)), backgroundColor: 'rgba(54, 162, 235, 0.6)', borderColor: 'rgba(54, 162, 235, 1)', borderWidth: 1 }, { label: '同理心', data: recentFilteredFeedback.map(fb => getScore(fb.scores?.empathy)), backgroundColor: 'rgba(255, 206, 86, 0.6)', borderColor: 'rgba(255, 206, 86, 1)', borderWidth: 1 }, { label: '自信', data: recentFilteredFeedback.map(fb => getScore(fb.scores?.confidence)), backgroundColor: 'rgba(75, 192, 192, 0.6)', borderColor: 'rgba(75, 192, 192, 1)', borderWidth: 1 }, { label: '適當性', data: recentFilteredFeedback.map(fb => getScore(fb.scores?.appropriateness)), backgroundColor: 'rgba(153, 102, 255, 0.6)', borderColor: 'rgba(153, 102, 255, 1)', borderWidth: 1 }, { label: '目標達成', data: recentFilteredFeedback.map(fb => getScore(fb.scores?.goalAchievement)), backgroundColor: 'rgba(255, 99, 132, 0.6)', borderColor: 'rgba(255, 99, 132, 1)', borderWidth: 1 }, ];\n\n\n  return (\n    <Container fluid className=\"feedback-wall-container p-0 d-flex flex-column\">\n\n      {/* --- 固定的頭部區域 --- */}\n      <div className=\"feedback-wall-header\">\n        <h2 className=\"mb-2\">回饋牆</h2>\n        <p className=\"text-muted mb-3\">這裡彙總了你每次請求 AI 回饋的結果，觀察你的進步趨勢吧！</p>\n        {/* 角色搜尋框 */}\n        <InputGroup size=\"sm\">\n          <InputGroup.Text><i className=\"bi bi-search\"></i></InputGroup.Text>\n          <Form.Control\n            type=\"text\"\n            placeholder=\"搜尋角色名稱...\"\n            value={characterSearch}\n            onChange={(e) => setCharacterSearch(e.target.value)}\n          />\n        </InputGroup>\n      </div>\n\n      {/* --- 篩選控制項區域 (添加收起/展開) --- */}\n      <div className=\"feedback-filters-container\"> {/* 這個 div 提供背景色和邊框 */}\n        <div className=\"d-flex justify-content-between align-items-center mb-2\">\n          <h6 className=\"mb-0 text-muted small\">對話目標篩選</h6>\n          <Button\n            variant=\"link\"\n            size=\"sm\"\n            onClick={() => setShowFilters(!showFilters)}\n            aria-controls=\"collapse-feedback-filters\"\n            aria-expanded={showFilters}\n            className=\"p-0 text-secondary\"\n          >\n            {showFilters ? '收起' : '展開'} <i className={`bi bi-chevron-${showFilters ? 'up' : 'down'}`}></i>\n          </Button>\n        </div>\n        {/* 使用 Collapse 元件 */}\n        <Collapse in={showFilters}>\n          <div id=\"collapse-feedback-filters\">\n            <InputGroup size=\"sm\">\n              <Form.Control\n                type=\"text\"\n                placeholder=\"搜尋對話目標關鍵字...\"\n                value={goalSearch}\n                onChange={(e) => setGoalSearch(e.target.value)}\n                className=\"me-2\" // 給右邊按鈕留空隙\n              />\n              <Button variant=\"outline-secondary\" size=\"sm\" onClick={clearFilters} title=\"清除所有篩選\">\n                <i className=\"bi bi-x-lg\"></i> 清除\n              </Button>\n            </InputGroup>\n             {/* TODO: 在這裡添加分數範圍篩選器 */}\n          </div>\n        </Collapse>\n      </div>\n      {/* --- 結束篩選控制項區域 --- */}\n\n\n      {/* --- 可滾動的內容區域 --- */}\n      <div className=\"feedback-wall-body\">\n        {/* ... (圖表和歷史記錄列表保持不變，使用 filteredFeedbackHistory) ... */}\n         {/* --- 進步趨勢圖表 --- */}\n      <Card className=\"mb-4 shadow-sm\">\n        <Card.Header>最近 {recentFilteredFeedback.length} 次符合篩選的練習表現趨勢</Card.Header>\n        <Card.Body>\n          {filteredFeedbackHistory.length > 0 ? (\n            recentFilteredFeedback.length > 0 ? (\n               <FeedbackChart labels={chartLabels} datasets={chartDataSets} />\n            ) : ( <Alert variant=\"light\" className=\"text-center\">沒有最近的回饋數據可供繪製趨勢圖。</Alert> )\n          ) : ( <Alert variant=\"light\" className=\"text-center\">{characterSearch || goalSearch ? '找不到符合篩選條件的回饋記錄。' : '還沒有任何回饋記錄。'}</Alert> )}\n        </Card.Body>\n      </Card>\n\n      {/* --- 歷史回饋列表 --- */}\n      <h4 className=\"h5 mb-3\">詳細回饋記錄 ({filteredFeedbackHistory.length} 筆)</h4>\n      {filteredFeedbackHistory.length > 0 ? (\n        filteredFeedbackHistory.map((fb) => (\n          <Card key={fb.timestamp} className=\"shadow-sm\">\n            <Card.Header className=\"d-flex justify-content-between align-items-center small text-muted flex-wrap\">\n              <span>{new Date(fb.timestamp).toLocaleString('zh-TW', { dateStyle: 'short', timeStyle: 'short' })}</span>\n              <div className=\"mt-1 mt-md-0\"> <Badge bg=\"secondary\" className=\"me-2\">角色: {fb.characterName || '未知'}</Badge> <Badge bg=\"info\" text=\"dark\">目標: {fb.goal || '未知'}</Badge> </div>\n            </Card.Header>\n            <Card.Body>\n              <Card.Subtitle className=\"mb-2 text-muted\">AI 總結:</Card.Subtitle>\n              <p style={{ whiteSpace: 'pre-wrap' }}>{fb.summary || '-'}</p>\n              {fb.scores && Object.values(fb.scores).some(s => s !== null) && ( <> <hr /> <p className=\"small mb-1\">評分細節:</p> <ul className=\"list-inline small\"> <li className=\"list-inline-item me-3\">清: <Badge pill bg={getScore(fb.scores.clarity) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.clarity)}</Badge></li> <li className=\"list-inline-item me-3\">同: <Badge pill bg={getScore(fb.scores.empathy) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.empathy)}</Badge></li> <li className=\"list-inline-item me-3\">自: <Badge pill bg={getScore(fb.scores.confidence) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.confidence)}</Badge></li> <li className=\"list-inline-item me-3\">適: <Badge pill bg={getScore(fb.scores.appropriateness) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.appropriateness)}</Badge></li> <li className=\"list-inline-item\">達: <Badge pill bg={getScore(fb.scores.goalAchievement) >= 60 ? \"success\" : \"warning\"}>{getScore(fb.scores.goalAchievement)}</Badge></li> </ul> </> )}\n            </Card.Body>\n          </Card>\n        ))\n      ) : ( <Alert variant=\"secondary\" className=\"text-center\">{characterSearch || goalSearch ? '找不到符合篩選條件的回饋記錄。' : '還沒有任何回饋記錄。'}</Alert> )}\n      </div>\n    </Container>\n  );\n}\n\nexport default FeedbackWall;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}